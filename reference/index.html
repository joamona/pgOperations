
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Gaspar Mora-Navarro">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Reference - PgOperations</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.472b142f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#src.pgOperations.pgOperations" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="PgOperations" class="md-header__button md-logo" aria-label="PgOperations" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PgOperations
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Reference
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/joamona/pgOperations" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="PgOperations" class="md-nav__button md-logo" aria-label="PgOperations" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    PgOperations
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/joamona/pgOperations" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Index
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/" class="md-nav__link">
        Tutorials
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Reference
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations" class="md-nav__link">
    src.pgOperations.pgOperations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations--pgoperations-module" class="md-nav__link">
    pgOperations module
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.FieldsAndValues" class="md-nav__link">
    FieldsAndValues
  </a>
  
    <nav class="md-nav" aria-label="FieldsAndValues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.FieldsAndValues.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.FieldsAndValuesBase" class="md-nav__link">
    FieldsAndValuesBase
  </a>
  
    <nav class="md-nav" aria-label="FieldsAndValuesBase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.FieldsAndValuesBase.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.GeometryFieldOptions" class="md-nav__link">
    GeometryFieldOptions
  </a>
  
    <nav class="md-nav" aria-label="GeometryFieldOptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.GeometryFieldOptions.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgConnect" class="md-nav__link">
    PgConnect
  </a>
  
    <nav class="md-nav" aria-label="PgConnect">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgConnect.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgConnection" class="md-nav__link">
    PgConnection
  </a>
  
    <nav class="md-nav" aria-label="PgConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgConnection.conn" class="md-nav__link">
    conn
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgConnection.cursor" class="md-nav__link">
    cursor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgConnection.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgConnection.commit" class="md-nav__link">
    commit()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgConnection.disconnect" class="md-nav__link">
    disconnect()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgCounters" class="md-nav__link">
    PgCounters
  </a>
  
    <nav class="md-nav" aria-label="PgCounters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgCounters.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgCounters.addCounter" class="md-nav__link">
    addCounter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgCounters.deleteCounter" class="md-nav__link">
    deleteCounter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgCounters.getAllCounters" class="md-nav__link">
    getAllCounters()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgCounters.getCounterValue" class="md-nav__link">
    getCounterValue()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgCounters.incrementCounter" class="md-nav__link">
    incrementCounter()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgDatabases" class="md-nav__link">
    PgDatabases
  </a>
  
    <nav class="md-nav" aria-label="PgDatabases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgDatabases.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgDatabases.createDatabase" class="md-nav__link">
    createDatabase()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgDatabases.dropDatabase" class="md-nav__link">
    dropDatabase()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations" class="md-nav__link">
    PgOperations
  </a>
  
    <nav class="md-nav" aria-label="PgOperations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgCreateTable" class="md-nav__link">
    pgCreateTable()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgDelete" class="md-nav__link">
    pgDelete()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgDeleteFileInRow" class="md-nav__link">
    pgDeleteFileInRow()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgDeleteWithFiles" class="md-nav__link">
    pgDeleteWithFiles()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgGetTableFieldNames" class="md-nav__link">
    pgGetTableFieldNames()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgInsert" class="md-nav__link">
    pgInsert()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgSelect" class="md-nav__link">
    pgSelect()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgTableExists" class="md-nav__link">
    pgTableExists()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgUpdate" class="md-nav__link">
    pgUpdate()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgValueExists" class="md-nav__link">
    pgValueExists()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.SelectGeometryFieldOptions" class="md-nav__link">
    SelectGeometryFieldOptions
  </a>
  
    <nav class="md-nav" aria-label="SelectGeometryFieldOptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.SelectGeometryFieldOptions.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.SelectGeometryFormat" class="md-nav__link">
    SelectGeometryFormat
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.WhereClause" class="md-nav__link">
    WhereClause
  </a>
  
    <nav class="md-nav" aria-label="WhereClause">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.WhereClause.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../explanation/" class="md-nav__link">
        Explanation
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations" class="md-nav__link">
    src.pgOperations.pgOperations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations--pgoperations-module" class="md-nav__link">
    pgOperations module
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.FieldsAndValues" class="md-nav__link">
    FieldsAndValues
  </a>
  
    <nav class="md-nav" aria-label="FieldsAndValues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.FieldsAndValues.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.FieldsAndValuesBase" class="md-nav__link">
    FieldsAndValuesBase
  </a>
  
    <nav class="md-nav" aria-label="FieldsAndValuesBase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.FieldsAndValuesBase.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.GeometryFieldOptions" class="md-nav__link">
    GeometryFieldOptions
  </a>
  
    <nav class="md-nav" aria-label="GeometryFieldOptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.GeometryFieldOptions.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgConnect" class="md-nav__link">
    PgConnect
  </a>
  
    <nav class="md-nav" aria-label="PgConnect">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgConnect.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgConnection" class="md-nav__link">
    PgConnection
  </a>
  
    <nav class="md-nav" aria-label="PgConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgConnection.conn" class="md-nav__link">
    conn
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgConnection.cursor" class="md-nav__link">
    cursor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgConnection.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgConnection.commit" class="md-nav__link">
    commit()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgConnection.disconnect" class="md-nav__link">
    disconnect()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgCounters" class="md-nav__link">
    PgCounters
  </a>
  
    <nav class="md-nav" aria-label="PgCounters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgCounters.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgCounters.addCounter" class="md-nav__link">
    addCounter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgCounters.deleteCounter" class="md-nav__link">
    deleteCounter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgCounters.getAllCounters" class="md-nav__link">
    getAllCounters()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgCounters.getCounterValue" class="md-nav__link">
    getCounterValue()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgCounters.incrementCounter" class="md-nav__link">
    incrementCounter()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgDatabases" class="md-nav__link">
    PgDatabases
  </a>
  
    <nav class="md-nav" aria-label="PgDatabases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgDatabases.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgDatabases.createDatabase" class="md-nav__link">
    createDatabase()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgDatabases.dropDatabase" class="md-nav__link">
    dropDatabase()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations" class="md-nav__link">
    PgOperations
  </a>
  
    <nav class="md-nav" aria-label="PgOperations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgCreateTable" class="md-nav__link">
    pgCreateTable()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgDelete" class="md-nav__link">
    pgDelete()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgDeleteFileInRow" class="md-nav__link">
    pgDeleteFileInRow()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgDeleteWithFiles" class="md-nav__link">
    pgDeleteWithFiles()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgGetTableFieldNames" class="md-nav__link">
    pgGetTableFieldNames()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgInsert" class="md-nav__link">
    pgInsert()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgSelect" class="md-nav__link">
    pgSelect()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgTableExists" class="md-nav__link">
    pgTableExists()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgUpdate" class="md-nav__link">
    pgUpdate()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.PgOperations.pgValueExists" class="md-nav__link">
    pgValueExists()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.SelectGeometryFieldOptions" class="md-nav__link">
    SelectGeometryFieldOptions
  </a>
  
    <nav class="md-nav" aria-label="SelectGeometryFieldOptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.SelectGeometryFieldOptions.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.SelectGeometryFormat" class="md-nav__link">
    SelectGeometryFormat
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.WhereClause" class="md-nav__link">
    WhereClause
  </a>
  
    <nav class="md-nav" aria-label="WhereClause">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pgOperations.pgOperations.WhereClause.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/joamona/pgOperations/edit/master/docs/reference.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


  <h1>Reference</h1>

<p>This part of the project documentation focuses on
an <strong>information-oriented</strong> approach. Use it as a
reference for the technical implementation of the
<code>calculator</code> project code.</p>


  <div class="doc doc-object doc-module">

<a id="src.pgOperations.pgOperations"></a>
    <div class="doc doc-contents first">

      <h2 id="src.pgOperations.pgOperations--pgoperations-module">pgOperations module</h2>
<p>A simple and light weight module to perform operations in PostgreSQL and PostGIS</p>
<p>author: Gaspar Mora-Navarro</p>
<p>Universitat Politècnica de València</p>
<p>Department of Cartographic Engineering Geodesy and Photogrammetry</p>
<p>Higher Technical School of Geodetic, Cartographic and Topographical Engineering</p>
<p>joamona@cgf.upv.es</p>
<p>This module facilitates to perform the most common operations: 
insert, delete, update, select, create and delete databases.</p>
<p>The class methods receive Python dictionaries, create the SQL sentences and perform the operations.
The methods are able to work also with PostGIS geometries, using WKT representations.</p>
<p>This library depends of the psycopg2 library (http://initd.org/psycopg/).</p>
<p>This library uses Python &gt;= 3</p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h2 id="src.pgOperations.pgOperations.FieldsAndValues" class="doc doc-heading">
        <code>
FieldsAndValues            (<a class="autorefs autorefs-internal" title="src.pgOperations.pgOperations.FieldsAndValuesBase" href="#src.pgOperations.pgOperations.FieldsAndValuesBase">FieldsAndValuesBase</a>)
        </code>



</h2>

    <div class="doc doc-contents ">

      <p>Create a SQL expression from a Python dictionary. </p>
<p>This class is used in the methods 
<a class="autorefs autorefs-internal" href="#src.pgOperations.pgOperations.PgOperations.pgInsert">pgInsert</a> and 
<a class="autorefs autorefs-internal" href="#src.pgOperations.pgOperations.PgOperations.pgUpdate">pgUpdate</a> of the class 
<a class="autorefs autorefs-internal" href="#src.pgOperations.pgOperations.PgOperations">PgOperations</a>.</p>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">FieldsAndValues</span><span class="p">(</span><span class="n">FieldsAndValuesBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a SQL expression from a Python dictionary. </span>

<span class="sd">    This class is used in the methods </span>
<span class="sd">    [pgInsert][src.pgOperations.pgOperations.PgOperations.pgInsert] and </span>
<span class="sd">    [pgUpdate][src.pgOperations.pgOperations.PgOperations.pgUpdate] of the class </span>
<span class="sd">    [PgOperations][src.pgOperations.pgOperations.PgOperations].</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">d</span><span class="p">:</span><span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">list_fields_to_remove</span><span class="p">:</span> <span class="nb">list</span><span class="o">=</span><span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span><span class="nb">dict</span><span class="p">,</span> <span class="n">list_fields_to_remove</span><span class="p">:</span> <span class="nb">list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
        <span class="n">geometryFieldOptions</span><span class="p">:</span> <span class="n">GeometryFieldOptions</span> <span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor               </span>

<span class="sd">        Args:</span>
<span class="sd">            d: Dictionary key-value, where the keys are the name fields and the values the value fields of a table,</span>
<span class="sd">                e.g. {&quot;depth&quot;:12.15, &quot;description&quot;:&quot;water well&quot;, &quot;geom&quot;:&quot;LINESTRING(100 200, 200 200)&quot;}.</span>
<span class="sd">                It is not necessary to have a geometry field in the dictionary.</span>
<span class="sd">                If there is a geometry field, the value must be in </span>
<span class="sd">                &lt;a href=&quot;https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry&quot; </span>
<span class="sd">                    target=&quot;_blank&quot;&gt;WKT&lt;/a&gt; format.</span>
<span class="sd">            list_fields_to_remove: list with the dictionary keys to exclude of the SQL expression.</span>
<span class="sd">                The corresponding field for the row in the table will not be affected by the insertion,</span>
<span class="sd">                or update.</span>
<span class="sd">                For example [&#39;gid&#39;] will remove the gid from the expressions and </span>
<span class="sd">                list of values. The value for the field in an insert will be null. The value</span>
<span class="sd">                for the field in an update will not be changed.</span>
<span class="sd">                Set to None if you do not want to remove any field.</span>
<span class="sd">                If the field to remove is not in the dictionary `d` any error will be raised.</span>
<span class="sd">            geometryFieldOptions: If there is a geometry field in the table,</span>
<span class="sd">                    this object gives the details of the geometry: the field name, the SRC,</span>
<span class="sd">                    and the new SRC, in case of a reprojections be required.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dict_to_string_fields_and_vector_values</span><span class="p">(</span>
            <span class="n">d</span><span class="p">,</span> <span class="n">list_fields_to_remove</span><span class="p">,</span> <span class="n">geometryFieldOptions</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__dict_to_string_fields_and_vector_values</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">d</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
            <span class="n">list_fields_to_remove</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> 
            <span class="n">geometryFieldOptions</span><span class="p">:</span> <span class="n">GeometryFieldOptions</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">geometryFieldOptions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">geom_field_name</span><span class="o">=</span><span class="n">geometryFieldOptions</span><span class="o">.</span><span class="n">geom_field_name</span>
            <span class="n">epsg</span><span class="o">=</span><span class="n">geometryFieldOptions</span><span class="o">.</span><span class="n">epsg</span>
            <span class="n">epsg_to_reproject</span><span class="o">=</span><span class="n">geometryFieldOptions</span><span class="o">.</span><span class="n">epsg_to_reproject</span>

        <span class="c1">#remove the fields to delete</span>
        <span class="k">if</span> <span class="n">list_fields_to_remove</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">list_fields_to_remove</span><span class="p">)):</span>
                <span class="n">key</span><span class="o">=</span><span class="n">list_fields_to_remove</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">d</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

        <span class="c1">#forms the tree values returned in the dictionary</span>
        <span class="n">it</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
        <span class="n">str_name_fields</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
        <span class="n">list_values</span> <span class="o">=</span><span class="p">[]</span>     
        <span class="n">str_s_values</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">it</span><span class="p">)):</span>
            <span class="n">str_name_fields</span> <span class="o">=</span> <span class="n">str_name_fields</span> <span class="o">+</span> <span class="n">it</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span>
            <span class="c1">#change the &#39;&#39; values by None</span>
            <span class="k">if</span> <span class="n">it</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="n">list_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> 
            <span class="k">else</span><span class="p">:</span>
                <span class="n">list_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">it</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>  

            <span class="k">if</span> <span class="n">geometryFieldOptions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">str_s_values</span><span class="o">=</span><span class="n">str_s_values</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">it</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">geom_field_name</span><span class="p">:</span>
                    <span class="n">str_s_values</span><span class="o">=</span><span class="n">str_s_values</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">epsg_to_reproject</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">st</span><span class="o">=</span><span class="s2">&quot;st_geometryfromtext(</span><span class="si">%s</span><span class="s2">,</span><span class="si">{epsg}</span><span class="s2">),&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="n">epsg</span><span class="p">)</span>
                        <span class="n">str_s_values</span><span class="o">=</span><span class="n">str_s_values</span> <span class="o">+</span> <span class="n">st</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">st</span><span class="o">=</span><span class="s2">&quot;st_transform(st_geometryfromtext(</span><span class="si">%s</span><span class="s2">,</span><span class="si">{epsg}</span><span class="s2">),</span><span class="si">{epsg_to_reproject}</span><span class="s2">),&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="n">epsg</span><span class="p">,</span> <span class="n">epsg_to_reproject</span><span class="o">=</span><span class="n">epsg_to_reproject</span><span class="p">)</span>
                        <span class="n">str_s_values</span><span class="o">=</span><span class="n">str_s_values</span> <span class="o">+</span> <span class="n">st</span>             
                    <span class="c1">#(%s,st_geometryfromtext(%s,25830))    </span>

        <span class="n">str_name_fields</span><span class="o">=</span><span class="n">str_name_fields</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">str_s_values</span><span class="o">=</span><span class="n">str_s_values</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1">#Initialize  the base class properties</span>
        <span class="n">FieldsAndValuesBase</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">str_name_fields</span><span class="p">,</span> <span class="n">list_values</span><span class="p">,</span> <span class="n">str_s_values</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">











  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.FieldsAndValues.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">list_fields_to_remove</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">geometryFieldOptions</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Constructor               </p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>d</code></td>
        <td><code>dict</code></td>
        <td><p>Dictionary key-value, where the keys are the name fields and the values the value fields of a table,
e.g. {"depth":12.15, "description":"water well", "geom":"LINESTRING(100 200, 200 200)"}.
It is not necessary to have a geometry field in the dictionary.
If there is a geometry field, the value must be in 
<a href="https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry" 
    target="_blank">WKT</a> format.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>list_fields_to_remove</code></td>
        <td><code>list</code></td>
        <td><p>list with the dictionary keys to exclude of the SQL expression.
The corresponding field for the row in the table will not be affected by the insertion,
or update.
For example ['gid'] will remove the gid from the expressions and 
list of values. The value for the field in an insert will be null. The value
for the field in an update will not be changed.
Set to None if you do not want to remove any field.
If the field to remove is not in the dictionary <code>d</code> any error will be raised.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>geometryFieldOptions</code></td>
        <td><code>GeometryFieldOptions</code></td>
        <td><p>If there is a geometry field in the table,
    this object gives the details of the geometry: the field name, the SRC,
    and the new SRC, in case of a reprojections be required.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span><span class="nb">dict</span><span class="p">,</span> <span class="n">list_fields_to_remove</span><span class="p">:</span> <span class="nb">list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
    <span class="n">geometryFieldOptions</span><span class="p">:</span> <span class="n">GeometryFieldOptions</span> <span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Constructor               </span>

<span class="sd">    Args:</span>
<span class="sd">        d: Dictionary key-value, where the keys are the name fields and the values the value fields of a table,</span>
<span class="sd">            e.g. {&quot;depth&quot;:12.15, &quot;description&quot;:&quot;water well&quot;, &quot;geom&quot;:&quot;LINESTRING(100 200, 200 200)&quot;}.</span>
<span class="sd">            It is not necessary to have a geometry field in the dictionary.</span>
<span class="sd">            If there is a geometry field, the value must be in </span>
<span class="sd">            &lt;a href=&quot;https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry&quot; </span>
<span class="sd">                target=&quot;_blank&quot;&gt;WKT&lt;/a&gt; format.</span>
<span class="sd">        list_fields_to_remove: list with the dictionary keys to exclude of the SQL expression.</span>
<span class="sd">            The corresponding field for the row in the table will not be affected by the insertion,</span>
<span class="sd">            or update.</span>
<span class="sd">            For example [&#39;gid&#39;] will remove the gid from the expressions and </span>
<span class="sd">            list of values. The value for the field in an insert will be null. The value</span>
<span class="sd">            for the field in an update will not be changed.</span>
<span class="sd">            Set to None if you do not want to remove any field.</span>
<span class="sd">            If the field to remove is not in the dictionary `d` any error will be raised.</span>
<span class="sd">        geometryFieldOptions: If there is a geometry field in the table,</span>
<span class="sd">                this object gives the details of the geometry: the field name, the SRC,</span>
<span class="sd">                and the new SRC, in case of a reprojections be required.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__dict_to_string_fields_and_vector_values</span><span class="p">(</span>
        <span class="n">d</span><span class="p">,</span> <span class="n">list_fields_to_remove</span><span class="p">,</span> <span class="n">geometryFieldOptions</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h2 id="src.pgOperations.pgOperations.FieldsAndValuesBase" class="doc doc-heading">
        <code>
FieldsAndValuesBase        </code>



</h2>

    <div class="doc doc-contents ">

      <p>Class to store the information that
<a class="autorefs autorefs-internal" href="#src.pgOperations.pgOperations.PgOperations.pgInsert">pgInsert</a>
and <a class="autorefs autorefs-internal" href="#src.pgOperations.pgOperations.PgOperations.pgUpdate">pgUpdate</a> need
to work.</p>
<p>Is the base class for the class <a class="autorefs autorefs-internal" href="#src.pgOperations.pgOperations.FieldsAndValues">FieldsAndValues</a></p>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">FieldsAndValuesBase</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Class to store the information that</span>
<span class="sd">    [pgInsert][src.pgOperations.pgOperations.PgOperations.pgInsert]</span>
<span class="sd">    and [pgUpdate][src.pgOperations.pgOperations.PgOperations.pgUpdate] need</span>
<span class="sd">    to work.</span>

<span class="sd">    Is the base class for the class [FieldsAndValues][src.pgOperations.pgOperations.FieldsAndValues]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">str_field_names</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">list_field_values</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">str_s_values</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">str_field_names</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span><span class="n">list_field_values</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">str_s_values</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt;fieldsAndValuesBase=FieldsAndValuesBase(</span>
<span class="sd">            &gt;&gt;&gt;     str_field_names=&quot;depth, description, geom&quot;, </span>
<span class="sd">            &gt;&gt;&gt;     list_field_values=[12.15, &quot;water well&quot;,&quot;POINT(100 200)&quot;], </span>
<span class="sd">            &gt;&gt;&gt;     str_s_values=&quot;%s,%s,st_transform(st_geometryfromtext(%s,25830),25831)&quot;</span>
<span class="sd">            &gt;&gt;&gt;)</span>

<span class="sd">        Args:</span>
<span class="sd">            str_field_names: String with the name of the fields of a table.</span>
<span class="sd">            list_field_values: List with the values of the fields. </span>
<span class="sd">                                Exactly the same number and in the same order.</span>
<span class="sd">            str_s_values: String with a %s for each field value, to use in the </span>
<span class="sd">                                execute method of a psycopg2 cursor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">str_field_names</span><span class="o">=</span><span class="n">str_field_names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_field_values</span><span class="o">=</span><span class="n">list_field_values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">str_s_values</span><span class="o">=</span><span class="n">str_s_values</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">












  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.FieldsAndValuesBase.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">str_field_names</span><span class="p">,</span> <span class="n">list_field_values</span><span class="p">,</span> <span class="n">str_s_values</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Constructor</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="n">fieldsAndValuesBase</span><span class="o">=</span><span class="n">FieldsAndValuesBase</span><span class="p">(</span>
<span class="o">&gt;&gt;&gt;</span>     <span class="n">str_field_names</span><span class="o">=</span><span class="s2">&quot;depth, description, geom&quot;</span><span class="p">,</span> 
<span class="o">&gt;&gt;&gt;</span>     <span class="n">list_field_values</span><span class="o">=</span><span class="p">[</span><span class="mf">12.15</span><span class="p">,</span> <span class="s2">&quot;water well&quot;</span><span class="p">,</span><span class="s2">&quot;POINT(100 200)&quot;</span><span class="p">],</span> 
<span class="o">&gt;&gt;&gt;</span>     <span class="n">str_s_values</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">,st_transform(st_geometryfromtext(</span><span class="si">%s</span><span class="s2">,25830),25831)&quot;</span>
<span class="o">&gt;&gt;&gt;</span><span class="p">)</span>
</code></pre></div>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>str_field_names</code></td>
        <td><code>str</code></td>
        <td><p>String with the name of the fields of a table.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>list_field_values</code></td>
        <td><code>str</code></td>
        <td><p>List with the values of the fields. 
                Exactly the same number and in the same order.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>str_s_values</code></td>
        <td><code>str</code></td>
        <td><p>String with a %s for each field value, to use in the 
                execute method of a psycopg2 cursor.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">str_field_names</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span><span class="n">list_field_values</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">str_s_values</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Constructor</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt;fieldsAndValuesBase=FieldsAndValuesBase(</span>
<span class="sd">        &gt;&gt;&gt;     str_field_names=&quot;depth, description, geom&quot;, </span>
<span class="sd">        &gt;&gt;&gt;     list_field_values=[12.15, &quot;water well&quot;,&quot;POINT(100 200)&quot;], </span>
<span class="sd">        &gt;&gt;&gt;     str_s_values=&quot;%s,%s,st_transform(st_geometryfromtext(%s,25830),25831)&quot;</span>
<span class="sd">        &gt;&gt;&gt;)</span>

<span class="sd">    Args:</span>
<span class="sd">        str_field_names: String with the name of the fields of a table.</span>
<span class="sd">        list_field_values: List with the values of the fields. </span>
<span class="sd">                            Exactly the same number and in the same order.</span>
<span class="sd">        str_s_values: String with a %s for each field value, to use in the </span>
<span class="sd">                            execute method of a psycopg2 cursor.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">str_field_names</span><span class="o">=</span><span class="n">str_field_names</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">list_field_values</span><span class="o">=</span><span class="n">list_field_values</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">str_s_values</span><span class="o">=</span><span class="n">str_s_values</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h2 id="src.pgOperations.pgOperations.GeometryFieldOptions" class="doc doc-heading">
        <code>
GeometryFieldOptions        </code>



</h2>

    <div class="doc doc-contents ">

      <p>Class with the details of the geometry field in the dictionary <code>d</code>, argument of the
methods <a class="autorefs autorefs-internal" href="#src.pgOperations.pgOperations.PgOperations.pgInsert">pgInsert</a> and 
<a class="autorefs autorefs-internal" href="#src.pgOperations.pgOperations.PgOperations.pgUpdate">pgUpdate</a>. </p>
<p>With this class you can set the geometry field name, the current SRC of the geometry, 
and the new SRC, in case you want ro reproject it. The SRC must be a
<a href="https://epsg.io/" target="_blank">EPSG</a> code.</p>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">GeometryFieldOptions</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Class with the details of the geometry field in the dictionary `d`, argument of the</span>
<span class="sd">    methods [pgInsert][src.pgOperations.pgOperations.PgOperations.pgInsert] and </span>
<span class="sd">    [pgUpdate][src.pgOperations.pgOperations.PgOperations.pgUpdate]. </span>

<span class="sd">    With this class you can set the geometry field name, the current SRC of the geometry, </span>
<span class="sd">    and the new SRC, in case you want ro reproject it. The SRC must be a</span>
<span class="sd">    &lt;a href=&quot;https://epsg.io/&quot; target=&quot;_blank&quot;&gt;EPSG&lt;/a&gt; code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">geom_field_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
    <span class="n">epsg</span><span class="o">=</span><span class="kc">None</span>
    <span class="n">epsg_to_reproject</span><span class="o">=</span><span class="kc">None</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">geom_field_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;geom&#39;</span><span class="p">,</span><span class="n">epsg</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
         <span class="n">epsg_to_reproject</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor</span>

<span class="sd">        Examples:</span>

<span class="sd">            &gt;&gt;&gt;geometryFieldOptions=pg.GeometryFieldOptions(geom_field_name=&quot;geom&quot;, </span>
<span class="sd">                    epsg=&#39;25830&#39;,epsg_to_reproject=&quot;25831&quot;)</span>

<span class="sd">        Args:</span>

<span class="sd">            geom_field_name: Table geometry field name.</span>
<span class="sd">            epsg: Current EPSG SRC code of the geometry.</span>
<span class="sd">            epsg_to_reproject: On inserting or getting the geometry, the</span>
<span class="sd">                geometry will be reprojected to this new SRC.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">geom_field_name</span><span class="o">=</span><span class="n">geom_field_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epsg</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">epsg</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">epsg_to_reproject</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">epsg_to_reproject</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">epsg_to_reproject</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">












  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.GeometryFieldOptions.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">geom_field_name</span><span class="o">=</span><span class="s1">&#39;geom&#39;</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">epsg_to_reproject</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Constructor</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="n">geometryFieldOptions</span><span class="o">=</span><span class="n">pg</span><span class="o">.</span><span class="n">GeometryFieldOptions</span><span class="p">(</span><span class="n">geom_field_name</span><span class="o">=</span><span class="s2">&quot;geom&quot;</span><span class="p">,</span> 
        <span class="n">epsg</span><span class="o">=</span><span class="s1">&#39;25830&#39;</span><span class="p">,</span><span class="n">epsg_to_reproject</span><span class="o">=</span><span class="s2">&quot;25831&quot;</span><span class="p">)</span>
</code></pre></div>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>geom_field_name</code></td>
        <td><code>str</code></td>
        <td><p>Table geometry field name.</p></td>
        <td><code>&#39;geom&#39;</code></td>
      </tr>
      <tr>
        <td><code>epsg</code></td>
        <td><code>Union[str, int]</code></td>
        <td><p>Current EPSG SRC code of the geometry.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>epsg_to_reproject</code></td>
        <td><code>Union[str, int]</code></td>
        <td><p>On inserting or getting the geometry, the
geometry will be reprojected to this new SRC.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">geom_field_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;geom&#39;</span><span class="p">,</span><span class="n">epsg</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
     <span class="n">epsg_to_reproject</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Constructor</span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt;geometryFieldOptions=pg.GeometryFieldOptions(geom_field_name=&quot;geom&quot;, </span>
<span class="sd">                epsg=&#39;25830&#39;,epsg_to_reproject=&quot;25831&quot;)</span>

<span class="sd">    Args:</span>

<span class="sd">        geom_field_name: Table geometry field name.</span>
<span class="sd">        epsg: Current EPSG SRC code of the geometry.</span>
<span class="sd">        epsg_to_reproject: On inserting or getting the geometry, the</span>
<span class="sd">            geometry will be reprojected to this new SRC.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">geom_field_name</span><span class="o">=</span><span class="n">geom_field_name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">epsg</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">epsg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">epsg_to_reproject</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epsg_to_reproject</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">epsg_to_reproject</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h2 id="src.pgOperations.pgOperations.PgConnect" class="doc doc-heading">
        <code>
PgConnect            (<a class="autorefs autorefs-internal" title="src.pgOperations.pgOperations.PgConnection" href="#src.pgOperations.pgOperations.PgConnection">PgConnection</a>)
        </code>



</h2>

    <div class="doc doc-contents ">

      <p>Class to create and store a Psycopg2 connection and cursor, which are the objects
used to perform the transactions in the database.</p>
<p>An instance of this class, or and instance
of the class <a class="autorefs autorefs-internal" href="#src.pgOperations.pgOperations.PgConnection">PgConnection</a>, 
is necessary to initialize the class 
<a class="autorefs autorefs-internal" href="#src.pgOperations.pgOperations.PgOperations">PgOperations</a>, which have the 
real utilities of this library.</p>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PgConnect</span><span class="p">(</span><span class="n">PgConnection</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class to create and store a Psycopg2 connection and cursor, which are the objects</span>
<span class="sd">    used to perform the transactions in the database.</span>

<span class="sd">    An instance of this class, or and instance</span>
<span class="sd">    of the class [PgConnection][src.pgOperations.pgOperations.PgConnection], </span>
<span class="sd">    is necessary to initialize the class </span>
<span class="sd">    [PgOperations][src.pgOperations.pgOperations.PgOperations], which have the </span>
<span class="sd">    real utilities of this library.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">database</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="kc">None</span>
    <span class="n">user</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="kc">None</span>
    <span class="n">password</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="kc">None</span>
    <span class="n">host</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="kc">None</span>
    <span class="n">port</span><span class="p">:</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="nb">int</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">database</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span><span class="n">user</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span><span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span><span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="p">,</span><span class="n">port</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="nb">int</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Constructor</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; from pgOperations import pgOperations as pg</span>
<span class="sd">            &gt;&gt;&gt; pgc=pg.PgConnect(database=&#39;pgoperationstest&#39;, user=&quot;postgres&quot;, password=&quot;postgres&quot;, host=&quot;localhost&quot;,port=5432)</span>
<span class="sd">            &gt;&gt;&gt; pgo=pg.PgOperations(pgConnection=pgc)</span>
<span class="sd">            &gt;&gt;&gt; pgc.disconnect()</span>

<span class="sd">        Args:</span>
<span class="sd">            database: The database name to connect.</span>
<span class="sd">            user: The user to connect.</span>
<span class="sd">            password: The user password.</span>
<span class="sd">            host: Host address.</span>
<span class="sd">            port: The port number where PostgreSQL is listening to.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">=</span><span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="n">database</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">)</span>
        <span class="n">PgConnection</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">=</span><span class="n">database</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">=</span><span class="n">user</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">password</span><span class="o">=</span><span class="n">password</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="o">=</span><span class="n">host</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="o">=</span><span class="n">port</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">














  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgConnect.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">database</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Constructor</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">pgOperations</span> <span class="kn">import</span> <span class="n">pgOperations</span> <span class="k">as</span> <span class="n">pg</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pgc</span><span class="o">=</span><span class="n">pg</span><span class="o">.</span><span class="n">PgConnect</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="s1">&#39;pgoperationstest&#39;</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">&quot;postgres&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;postgres&quot;</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">5432</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pgo</span><span class="o">=</span><span class="n">pg</span><span class="o">.</span><span class="n">PgOperations</span><span class="p">(</span><span class="n">pgConnection</span><span class="o">=</span><span class="n">pgc</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pgc</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</code></pre></div>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>database</code></td>
        <td><code>str</code></td>
        <td><p>The database name to connect.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>user</code></td>
        <td><code>str</code></td>
        <td><p>The user to connect.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>password</code></td>
        <td><code>str</code></td>
        <td><p>The user password.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>host</code></td>
        <td><code>str</code></td>
        <td><p>Host address.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>port</code></td>
        <td><code>Union[str, int]</code></td>
        <td><p>The port number where PostgreSQL is listening to.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">database</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span><span class="n">user</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span><span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span><span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="p">,</span><span class="n">port</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="nb">int</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Constructor</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; from pgOperations import pgOperations as pg</span>
<span class="sd">        &gt;&gt;&gt; pgc=pg.PgConnect(database=&#39;pgoperationstest&#39;, user=&quot;postgres&quot;, password=&quot;postgres&quot;, host=&quot;localhost&quot;,port=5432)</span>
<span class="sd">        &gt;&gt;&gt; pgo=pg.PgOperations(pgConnection=pgc)</span>
<span class="sd">        &gt;&gt;&gt; pgc.disconnect()</span>

<span class="sd">    Args:</span>
<span class="sd">        database: The database name to connect.</span>
<span class="sd">        user: The user to connect.</span>
<span class="sd">        password: The user password.</span>
<span class="sd">        host: Host address.</span>
<span class="sd">        port: The port number where PostgreSQL is listening to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">=</span><span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="n">database</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">)</span>
    <span class="n">PgConnection</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">=</span><span class="n">database</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">=</span><span class="n">user</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">password</span><span class="o">=</span><span class="n">password</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="o">=</span><span class="n">host</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="o">=</span><span class="n">port</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h2 id="src.pgOperations.pgOperations.PgConnection" class="doc doc-heading">
        <code>
PgConnection        </code>



</h2>

    <div class="doc doc-contents ">

      <p>Class to store a Psycopg2 connection and cursor, which are the objects
used to perform the transactions in the database.</p>
<p>This class do not do anything interesting, but an instance of this class, or an instance of 
PgConnection, or PgConnect, is necessary to initialize the class PgOperations, which have the 
real utilities of this library.</p>
<p>This class is the base class for the class <a class="autorefs autorefs-internal" href="#src.pgOperations.pgOperations.PgConnect">PgConnect</a>, 
which allows creating the Psycopg2 connection with the user credentials.</p>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PgConnection</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Class to store a Psycopg2 connection and cursor, which are the objects</span>
<span class="sd">    used to perform the transactions in the database.</span>

<span class="sd">    This class do not do anything interesting, but an instance of this class, or an instance of </span>
<span class="sd">    PgConnection, or PgConnect, is necessary to initialize the class PgOperations, which have the </span>
<span class="sd">    real utilities of this library.</span>

<span class="sd">    This class is the base class for the class [PgConnect][src.pgOperations.pgOperations.PgConnect], </span>
<span class="sd">    which allows creating the Psycopg2 connection with the user credentials.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;psycopg2 connection object - class variable&quot;&quot;&quot;</span>
    <span class="n">cursor</span><span class="o">=</span><span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;psycopg2 cursor object - class variable&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">psycopg2Connection</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; import psycopg2</span>
<span class="sd">            &gt;&gt;&gt; from pgOperations import pgOperations as pg</span>
<span class="sd">            &gt;&gt;&gt; conn=psycopg2.connect(database=&quot;pgoperationstest&quot;, user=&quot;postgres&quot;, </span>
<span class="sd">                    password=&quot;postgres&quot;, host=&quot;localhost&quot;, port=5432)</span>
<span class="sd">            &gt;&gt;&gt; pgConnection = pg.PgConnection(conn)</span>
<span class="sd">            &gt;&gt;&gt; pgOperations = pg.PgOperations(pgConnection)</span>

<span class="sd">        args:</span>
<span class="sd">            psycopg2Connection (psycopg2 connection): a psycopg2 connection</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2Connection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Closes the cursor and the connection. </span>

<span class="sd">        It is important to close the connections because PostgreSQL has a limited number</span>
<span class="sd">        of connections alive limited. In PostgreSQL, this number is configurable and also, there is a garbage</span>
<span class="sd">        collector to close unused connections, but the recommendation is to close the connection once </span>
<span class="sd">        you have finished.</span>

<span class="sd">        The recommendation is use the connection to perform all the transactions you need, </span>
<span class="sd">        commit the changes and close the Psycopg2 cursor and the connection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">commit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Commits the changes in the database. The changes will not be performed until</span>
<span class="sd">        you have committed the transaction. You will not see the changes until you commit.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h3 id="src.pgOperations.pgOperations.PgConnection.conn" class="doc doc-heading">
<code class="highlight language-python"><span class="n">conn</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>psycopg2 connection object - class variable</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="src.pgOperations.pgOperations.PgConnection.cursor" class="doc doc-heading">
<code class="highlight language-python"><span class="n">cursor</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>psycopg2 cursor object - class variable</p>
    </div>

  </div>






  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgConnection.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">psycopg2Connection</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Constructor</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">psycopg2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">pgOperations</span> <span class="kn">import</span> <span class="n">pgOperations</span> <span class="k">as</span> <span class="n">pg</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">conn</span><span class="o">=</span><span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="s2">&quot;pgoperationstest&quot;</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">&quot;postgres&quot;</span><span class="p">,</span> 
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;postgres&quot;</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">5432</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pgConnection</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">PgConnection</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pgOperations</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">PgOperations</span><span class="p">(</span><span class="n">pgConnection</span><span class="p">)</span>
</code></pre></div>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>psycopg2Connection</code></td>
        <td><code>psycopg2 connection</code></td>
        <td><p>a psycopg2 connection</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">psycopg2Connection</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; import psycopg2</span>
<span class="sd">        &gt;&gt;&gt; from pgOperations import pgOperations as pg</span>
<span class="sd">        &gt;&gt;&gt; conn=psycopg2.connect(database=&quot;pgoperationstest&quot;, user=&quot;postgres&quot;, </span>
<span class="sd">                password=&quot;postgres&quot;, host=&quot;localhost&quot;, port=5432)</span>
<span class="sd">        &gt;&gt;&gt; pgConnection = pg.PgConnection(conn)</span>
<span class="sd">        &gt;&gt;&gt; pgOperations = pg.PgOperations(pgConnection)</span>

<span class="sd">    args:</span>
<span class="sd">        psycopg2Connection (psycopg2 connection): a psycopg2 connection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2Connection</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgConnection.commit" class="doc doc-heading">
<code class="highlight language-python"><span class="n">commit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Commits the changes in the database. The changes will not be performed until
you have committed the transaction. You will not see the changes until you commit.</p>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">commit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Commits the changes in the database. The changes will not be performed until</span>
<span class="sd">    you have committed the transaction. You will not see the changes until you commit.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgConnection.disconnect" class="doc doc-heading">
<code class="highlight language-python"><span class="n">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Closes the cursor and the connection. </p>
<p>It is important to close the connections because PostgreSQL has a limited number
of connections alive limited. In PostgreSQL, this number is configurable and also, there is a garbage
collector to close unused connections, but the recommendation is to close the connection once 
you have finished.</p>
<p>The recommendation is use the connection to perform all the transactions you need, 
commit the changes and close the Psycopg2 cursor and the connection.</p>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Closes the cursor and the connection. </span>

<span class="sd">    It is important to close the connections because PostgreSQL has a limited number</span>
<span class="sd">    of connections alive limited. In PostgreSQL, this number is configurable and also, there is a garbage</span>
<span class="sd">    collector to close unused connections, but the recommendation is to close the connection once </span>
<span class="sd">    you have finished.</span>

<span class="sd">    The recommendation is use the connection to perform all the transactions you need, </span>
<span class="sd">    commit the changes and close the Psycopg2 cursor and the connection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h2 id="src.pgOperations.pgOperations.PgCounters" class="doc doc-heading">
        <code>
PgCounters        </code>



</h2>

    <div class="doc doc-contents ">

      <p>Counters are created as sequences, and the sequences are represented
in the database as tables. The current value of the counters are get
with the sentence <code>select last_value from sequence_name</code>.
All the counters, or sequences, are stored in the schema counters.</p>
<p>Counters name should be given without the schema name.
The schema <code>counters</code> ant the table <code>counters.counters</code> are automatically 
created first time a counter is added. 
The table <code>counters.counters</code> contains the counters name and a description.
This table is used by the method <code>getAllCounters</code>, which lists all the counters,
its description and its current value.</p>
<p>Examples of use in <a href="../tutorials/#manage-counters">Manage counters</a>.</p>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PgCounters</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Counters are created as sequences, and the sequences are represented</span>
<span class="sd">    in the database as tables. The current value of the counters are get</span>
<span class="sd">    with the sentence `select last_value from sequence_name`.</span>
<span class="sd">    All the counters, or sequences, are stored in the schema counters.</span>

<span class="sd">    Counters name should be given without the schema name.</span>
<span class="sd">    The schema `counters` ant the table `counters.counters` are automatically </span>
<span class="sd">    created first time a counter is added. </span>
<span class="sd">    The table `counters.counters` contains the counters name and a description.</span>
<span class="sd">    This table is used by the method `getAllCounters`, which lists all the counters,</span>
<span class="sd">    its description and its current value.</span>

<span class="sd">    Examples of use in &lt;a href=&quot;../tutorials/#manage-counters&quot;&gt;Manage counters&lt;/a&gt;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">counter_schema</span><span class="o">=</span><span class="s1">&#39;counters&#39;</span>
    <span class="n">counters_table</span><span class="o">=</span><span class="s1">&#39;counters.counters&#39;</span>
    <span class="n">pgo</span><span class="p">:</span> <span class="n">PgOperations</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pgOperations</span><span class="p">:</span> <span class="n">PgOperations</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor.</span>

<span class="sd">        Examples:</span>

<span class="sd">            &gt;&gt;&gt;counter_name = &#39;c1&#39;</span>
<span class="sd">            &gt;&gt;&gt;c=pg.PgCounters(pgo)</span>
<span class="sd">            &gt;&gt;&gt;c.addCounter(counter_name,counter_name + &#39; description&#39;)</span>

<span class="sd">        Args:</span>
<span class="sd">            pgOperations: PgOperations instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">=</span><span class="n">pgOperations</span>

    <span class="k">def</span> <span class="nf">addCounter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">counter_name</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">counter_description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> 
        <span class="n">incrementBy</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span> 
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a counter. Creates the schema `counters` and the table `counters.counters`</span>
<span class="sd">        if they do not exist. Adds to the table `counters.counters` a row with</span>
<span class="sd">        the counter name and the counter description.</span>

<span class="sd">        If the counter already exists, an exception will be raised.</span>

<span class="sd">        If the schema `counters` or the table `counters.counters` already</span>
<span class="sd">        exists this function does not raise any exception.</span>

<span class="sd">        Args:</span>
<span class="sd">            counter_name: Counter name without schema, e.g. &#39;visits&#39;.</span>
<span class="sd">            counter_description: Counter description.</span>
<span class="sd">            start: Number to start the counter.</span>
<span class="sd">            incrementBy: Increment to add to the counter.</span>
<span class="sd">            print_query: For debug purposes. In true prints the queries and</span>
<span class="sd">                values of the query in the function.</span>
<span class="sd">        &quot;&quot;&quot;</span>    
        <span class="k">if</span> <span class="n">start</span><span class="o">&lt;</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;start can not be less than 1&quot;</span><span class="p">)</span>
        <span class="n">complete_counter_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">counter_schema</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">counter_name</span>
        <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;create schema if not exists counters&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgCreateTable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counters_table</span><span class="p">,</span><span class="s1">&#39;gid serial primary key, counter_name varchar unique, counter_description varchar&#39;</span><span class="p">,</span><span class="kc">False</span><span class="p">,</span><span class="n">print_query</span><span class="p">)</span>

        <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;create sequence </span><span class="si">{complete_counter_name}</span><span class="s1"> as integer start with </span><span class="si">%s</span><span class="s1"> increment by </span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">complete_counter_name</span><span class="o">=</span><span class="n">complete_counter_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">,(</span><span class="n">start</span><span class="p">,</span><span class="n">incrementBy</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;addCounter&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Create sequence: &#39;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">autoCommit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="n">fav</span><span class="o">=</span><span class="n">FieldsAndValues</span><span class="p">({</span><span class="s1">&#39;counter_name&#39;</span><span class="p">:</span><span class="n">counter_name</span><span class="p">,</span> <span class="s1">&#39;counter_description&#39;</span><span class="p">:</span><span class="n">counter_description</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgInsert</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counters_table</span><span class="p">,</span><span class="n">fav</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="n">print_query</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">deleteCounter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">counter_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes a counter,  or sequence. Also deletes de corresponding row</span>
<span class="sd">        in the table `counters.counters`.</span>
<span class="sd">        If the counter does not exist, this method do not raises any exception.</span>

<span class="sd">        Args:</span>
<span class="sd">            counter_name: Counter name without schema, e.g. &#39;visits&#39;.</span>
<span class="sd">            print_query: For debug purposes. In true prints the queries and</span>
<span class="sd">                values of the query in the function.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An integer with the number of rows of the table `counters.counters` deleted.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">complete_counter_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">counter_schema</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">counter_name</span>
        <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;drop sequence if exists </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">complete_counter_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">autoCommit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="n">wc</span><span class="o">=</span><span class="n">WhereClause</span><span class="p">(</span><span class="s1">&#39;counter_name=</span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,[</span><span class="n">counter_name</span><span class="p">])</span>
        <span class="n">n</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgDelete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counters_table</span><span class="p">,</span><span class="n">wc</span><span class="p">,</span><span class="n">print_query</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;deleteCounter&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Query&#39;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sequences deleted: &#39;</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">incrementCounter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">counter_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Increments the counter value.</span>

<span class="sd">        Counters are incremented even the transaction is rolled back.</span>

<span class="sd">        Args:</span>

<span class="sd">            counter_name: Counter name without schema, e.g. &#39;visits&#39;.</span>
<span class="sd">            print_query: For debug purposes. In true prints the queries and</span>
<span class="sd">                values of the query in the function.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The current counter value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">complete_counter_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">counter_schema</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">counter_name</span>
        <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;select nextval(</span><span class="si">%s</span><span class="s1">)&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">,[</span><span class="n">complete_counter_name</span><span class="p">])</span>
        <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">();</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;incrementCounter&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Query: &#39;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Current counter value: &#39;</span><span class="p">,</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">getCounterValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">counter_name</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the current counter value.</span>

<span class="sd">        Args:</span>

<span class="sd">            counter_name: Counter name without schema, e.g. &#39;visits&#39;.</span>
<span class="sd">            print_query: For debug purposes. In true prints the queries and</span>
<span class="sd">                values of the query in the function.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The current counter value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">complete_counter_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">counter_schema</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">counter_name</span>
        <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;select last_value from </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">complete_counter_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">)</span>
        <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;getCounterValue&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Quer: y&#39;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Current counter value: &#39;</span><span class="p">,</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">def</span> <span class="nf">getAllCounters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">list</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all the counters name, description and current values in a list of</span>
<span class="sd">        dictionaries.</span>

<span class="sd">        Args:</span>

<span class="sd">            print_query: For debug purposes. In true prints the queries and</span>
<span class="sd">                values of the query in the function.</span>

<span class="sd">        Returns:</span>
<span class="sd">            All the counters name, description and current values in a list of</span>
<span class="sd">        dictionaries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgSelect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counters_table</span><span class="p">,</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="n">print_query</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">r</span><span class="p">:</span>
            <span class="n">currentValue</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getCounterValue</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;counter_name&#39;</span><span class="p">])</span>
            <span class="n">row</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">currentValue</span>
        <span class="k">return</span> <span class="n">r</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">












  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgCounters.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pgOperations</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Constructor.</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="n">counter_name</span> <span class="o">=</span> <span class="s1">&#39;c1&#39;</span>
<span class="o">&gt;&gt;&gt;</span><span class="n">c</span><span class="o">=</span><span class="n">pg</span><span class="o">.</span><span class="n">PgCounters</span><span class="p">(</span><span class="n">pgo</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="n">c</span><span class="o">.</span><span class="n">addCounter</span><span class="p">(</span><span class="n">counter_name</span><span class="p">,</span><span class="n">counter_name</span> <span class="o">+</span> <span class="s1">&#39; description&#39;</span><span class="p">)</span>
</code></pre></div>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pgOperations</code></td>
        <td><code>PgOperations</code></td>
        <td><p>PgOperations instance.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pgOperations</span><span class="p">:</span> <span class="n">PgOperations</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor.</span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt;counter_name = &#39;c1&#39;</span>
<span class="sd">        &gt;&gt;&gt;c=pg.PgCounters(pgo)</span>
<span class="sd">        &gt;&gt;&gt;c.addCounter(counter_name,counter_name + &#39; description&#39;)</span>

<span class="sd">    Args:</span>
<span class="sd">        pgOperations: PgOperations instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">=</span><span class="n">pgOperations</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgCounters.addCounter" class="doc doc-heading">
<code class="highlight language-python"><span class="n">addCounter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">counter_name</span><span class="p">,</span> <span class="n">counter_description</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">incrementBy</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Adds a counter. Creates the schema <code>counters</code> and the table <code>counters.counters</code>
if they do not exist. Adds to the table <code>counters.counters</code> a row with
the counter name and the counter description.</p>
<p>If the counter already exists, an exception will be raised.</p>
<p>If the schema <code>counters</code> or the table <code>counters.counters</code> already
exists this function does not raise any exception.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>counter_name</code></td>
        <td><code>str</code></td>
        <td><p>Counter name without schema, e.g. 'visits'.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>counter_description</code></td>
        <td><code>str</code></td>
        <td><p>Counter description.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>start</code></td>
        <td></td>
        <td><p>Number to start the counter.</p></td>
        <td><code>1</code></td>
      </tr>
      <tr>
        <td><code>incrementBy</code></td>
        <td></td>
        <td><p>Increment to add to the counter.</p></td>
        <td><code>1</code></td>
      </tr>
      <tr>
        <td><code>print_query</code></td>
        <td></td>
        <td><p>For debug purposes. In true prints the queries and
values of the query in the function.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">addCounter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">counter_name</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">counter_description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> 
    <span class="n">incrementBy</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span> 
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a counter. Creates the schema `counters` and the table `counters.counters`</span>
<span class="sd">    if they do not exist. Adds to the table `counters.counters` a row with</span>
<span class="sd">    the counter name and the counter description.</span>

<span class="sd">    If the counter already exists, an exception will be raised.</span>

<span class="sd">    If the schema `counters` or the table `counters.counters` already</span>
<span class="sd">    exists this function does not raise any exception.</span>

<span class="sd">    Args:</span>
<span class="sd">        counter_name: Counter name without schema, e.g. &#39;visits&#39;.</span>
<span class="sd">        counter_description: Counter description.</span>
<span class="sd">        start: Number to start the counter.</span>
<span class="sd">        incrementBy: Increment to add to the counter.</span>
<span class="sd">        print_query: For debug purposes. In true prints the queries and</span>
<span class="sd">            values of the query in the function.</span>
<span class="sd">    &quot;&quot;&quot;</span>    
    <span class="k">if</span> <span class="n">start</span><span class="o">&lt;</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;start can not be less than 1&quot;</span><span class="p">)</span>
    <span class="n">complete_counter_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">counter_schema</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">counter_name</span>
    <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;create schema if not exists counters&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgCreateTable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counters_table</span><span class="p">,</span><span class="s1">&#39;gid serial primary key, counter_name varchar unique, counter_description varchar&#39;</span><span class="p">,</span><span class="kc">False</span><span class="p">,</span><span class="n">print_query</span><span class="p">)</span>

    <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;create sequence </span><span class="si">{complete_counter_name}</span><span class="s1"> as integer start with </span><span class="si">%s</span><span class="s1"> increment by </span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">complete_counter_name</span><span class="o">=</span><span class="n">complete_counter_name</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">,(</span><span class="n">start</span><span class="p">,</span><span class="n">incrementBy</span><span class="p">))</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;addCounter&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Create sequence: &#39;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">autoCommit</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="n">fav</span><span class="o">=</span><span class="n">FieldsAndValues</span><span class="p">({</span><span class="s1">&#39;counter_name&#39;</span><span class="p">:</span><span class="n">counter_name</span><span class="p">,</span> <span class="s1">&#39;counter_description&#39;</span><span class="p">:</span><span class="n">counter_description</span><span class="p">})</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgInsert</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counters_table</span><span class="p">,</span><span class="n">fav</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="n">print_query</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgCounters.deleteCounter" class="doc doc-heading">
<code class="highlight language-python"><span class="n">deleteCounter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">counter_name</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Deletes a counter,  or sequence. Also deletes de corresponding row
in the table <code>counters.counters</code>.
If the counter does not exist, this method do not raises any exception.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>counter_name</code></td>
        <td><code>str</code></td>
        <td><p>Counter name without schema, e.g. 'visits'.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>print_query</code></td>
        <td></td>
        <td><p>For debug purposes. In true prints the queries and
values of the query in the function.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>int</code></td>
      <td><p>An integer with the number of rows of the table <code>counters.counters</code> deleted.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">deleteCounter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">counter_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deletes a counter,  or sequence. Also deletes de corresponding row</span>
<span class="sd">    in the table `counters.counters`.</span>
<span class="sd">    If the counter does not exist, this method do not raises any exception.</span>

<span class="sd">    Args:</span>
<span class="sd">        counter_name: Counter name without schema, e.g. &#39;visits&#39;.</span>
<span class="sd">        print_query: For debug purposes. In true prints the queries and</span>
<span class="sd">            values of the query in the function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An integer with the number of rows of the table `counters.counters` deleted.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">complete_counter_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">counter_schema</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">counter_name</span>
    <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;drop sequence if exists </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">complete_counter_name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">autoCommit</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="n">wc</span><span class="o">=</span><span class="n">WhereClause</span><span class="p">(</span><span class="s1">&#39;counter_name=</span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,[</span><span class="n">counter_name</span><span class="p">])</span>
    <span class="n">n</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgDelete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counters_table</span><span class="p">,</span><span class="n">wc</span><span class="p">,</span><span class="n">print_query</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;deleteCounter&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Query&#39;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sequences deleted: &#39;</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">n</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgCounters.getAllCounters" class="doc doc-heading">
<code class="highlight language-python"><span class="n">getAllCounters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Returns all the counters name, description and current values in a list of
dictionaries.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>print_query</code></td>
        <td></td>
        <td><p>For debug purposes. In true prints the queries and
values of the query in the function.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>All the counters name, description and current values in a list of</p></td>
    </tr>
  </tbody>
</table>      <p>dictionaries.</p>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">getAllCounters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">list</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns all the counters name, description and current values in a list of</span>
<span class="sd">    dictionaries.</span>

<span class="sd">    Args:</span>

<span class="sd">        print_query: For debug purposes. In true prints the queries and</span>
<span class="sd">            values of the query in the function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        All the counters name, description and current values in a list of</span>
<span class="sd">    dictionaries.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgSelect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counters_table</span><span class="p">,</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="n">print_query</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">r</span><span class="p">:</span>
        <span class="n">currentValue</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getCounterValue</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;counter_name&#39;</span><span class="p">])</span>
        <span class="n">row</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">currentValue</span>
    <span class="k">return</span> <span class="n">r</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgCounters.getCounterValue" class="doc doc-heading">
<code class="highlight language-python"><span class="n">getCounterValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">counter_name</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Returns the current counter value.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>counter_name</code></td>
        <td><code>str</code></td>
        <td><p>Counter name without schema, e.g. 'visits'.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>print_query</code></td>
        <td></td>
        <td><p>For debug purposes. In true prints the queries and
values of the query in the function.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>int</code></td>
      <td><p>The current counter value.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">getCounterValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">counter_name</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the current counter value.</span>

<span class="sd">    Args:</span>

<span class="sd">        counter_name: Counter name without schema, e.g. &#39;visits&#39;.</span>
<span class="sd">        print_query: For debug purposes. In true prints the queries and</span>
<span class="sd">            values of the query in the function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The current counter value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">complete_counter_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">counter_schema</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">counter_name</span>
    <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;select last_value from </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">complete_counter_name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">)</span>
    <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;getCounterValue&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Quer: y&#39;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Current counter value: &#39;</span><span class="p">,</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgCounters.incrementCounter" class="doc doc-heading">
<code class="highlight language-python"><span class="n">incrementCounter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">counter_name</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Increments the counter value.</p>
<p>Counters are incremented even the transaction is rolled back.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>counter_name</code></td>
        <td><code>str</code></td>
        <td><p>Counter name without schema, e.g. 'visits'.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>print_query</code></td>
        <td></td>
        <td><p>For debug purposes. In true prints the queries and
values of the query in the function.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>int</code></td>
      <td><p>The current counter value.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">incrementCounter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">counter_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Increments the counter value.</span>

<span class="sd">    Counters are incremented even the transaction is rolled back.</span>

<span class="sd">    Args:</span>

<span class="sd">        counter_name: Counter name without schema, e.g. &#39;visits&#39;.</span>
<span class="sd">        print_query: For debug purposes. In true prints the queries and</span>
<span class="sd">            values of the query in the function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The current counter value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">complete_counter_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">counter_schema</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">counter_name</span>
    <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;select nextval(</span><span class="si">%s</span><span class="s1">)&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">,[</span><span class="n">complete_counter_name</span><span class="p">])</span>
    <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">();</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgo</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;incrementCounter&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Query: &#39;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Current counter value: &#39;</span><span class="p">,</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h2 id="src.pgOperations.pgOperations.PgDatabases" class="doc doc-heading">
        <code>
PgDatabases        </code>



</h2>

    <div class="doc doc-contents ">

      <p>Class to create and delete databases. To use this class it is necessary to have
an instance of the class PgConnect</p>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PgDatabases</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class to create and delete databases. To use this class it is necessary to have</span>
<span class="sd">    an instance of the class PgConnect</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pgConnect</span><span class="p">:</span> <span class="n">PgConnect</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pgConnect</span><span class="p">:</span> <span class="n">PgConnect</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor</span>

<span class="sd">        Examples:</span>

<span class="sd">            &gt;&gt;&gt; pgc=pg.PgConnect(database=&#39;postgres&#39;, user=&quot;postgres&quot;, password=&quot;postgres&quot;, </span>
<span class="sd">                        host=&quot;localhost&quot;,port=5432)</span>
<span class="sd">            &gt;&gt;&gt; pgdb=pg.PgDatabases(pgConnect=pgc)</span>
<span class="sd">            &gt;&gt;&gt; pgc2=pgdb.createDatabase(databaseName=&quot;pgoperationstest&quot;,</span>
<span class="sd">                        addPostgisExtension=True,closeNewConection=False)</span>
<span class="sd">            &gt;&gt;&gt; pgc2.cursor.execute(&quot;create schema d&quot;)</span>
<span class="sd">            &gt;&gt;&gt; pgc2.cursor.execute(&quot;create table d.points (gid serial primary key, description varchar, depth double precision, geom geometry(&#39;POINT&#39;,25831))&quot;)</span>
<span class="sd">            &gt;&gt;&gt; pgc2.commit()</span>
<span class="sd">            &gt;&gt;&gt; pgc2.disconnect()</span>
<span class="sd">            &gt;&gt;&gt; pgc.disconnect()</span>

<span class="sd">        Args:</span>
<span class="sd">            pgConnect: PgConnect instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgConnect</span><span class="o">=</span><span class="n">pgConnect</span>

    <span class="k">def</span> <span class="nf">createDatabase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">databaseName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">addPostgisExtension</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> 
            <span class="n">closeNewConnection</span><span class="p">:</span><span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PgConnect</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Create a database.</span>

<span class="sd">        Examples:</span>

<span class="sd">            &gt;&gt;&gt; pgc2=pgdb.createDatabase(databaseName=&quot;pgoperationstest&quot;,</span>
<span class="sd">                    addPostgisExtension=True,closeNewConection=False)</span>
<span class="sd">        Args:</span>
<span class="sd">            databaseName: The database name.</span>
<span class="sd">            addPostgisExtension: Whether or not add the PostGIS extension to the new database. Default True.</span>
<span class="sd">            closeNewConnection: Whether or not to close the connection to the new database. Default True.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A PgConnect instance to manage the newly created database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgConnect</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="n">ISOLATION_LEVEL_AUTOCOMMIT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgConnect</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;create database &#39;</span> <span class="o">+</span> <span class="n">databaseName</span><span class="p">)</span>
        <span class="n">pgConnect</span><span class="p">:</span> <span class="n">PgConnect</span><span class="o">=</span><span class="n">PgConnect</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="n">databaseName</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnect</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> 
            <span class="n">password</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnect</span><span class="o">.</span><span class="n">password</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgConnect</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> 
            <span class="n">port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnect</span><span class="o">.</span><span class="n">port</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">addPostgisExtension</span><span class="p">:</span>
            <span class="n">pgConnect</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;create extension postgis&quot;</span><span class="p">)</span>
            <span class="n">pgConnect</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">closeNewConnection</span><span class="p">:</span>
            <span class="n">pgConnect</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">pgConnect</span>

    <span class="k">def</span> <span class="nf">dropDatabase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">databaseName</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes a database.</span>

<span class="sd">        Examples:</span>

<span class="sd">            &gt;&gt;&gt; pgdb.dropDatabase(&quot;pgoperationstest&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgConnect</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="n">ISOLATION_LEVEL_AUTOCOMMIT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgConnect</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;drop database &#39;</span> <span class="o">+</span> <span class="n">databaseName</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgDatabases.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pgConnect</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Constructor</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">pgc</span><span class="o">=</span><span class="n">pg</span><span class="o">.</span><span class="n">PgConnect</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="s1">&#39;postgres&#39;</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">&quot;postgres&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;postgres&quot;</span><span class="p">,</span> 
            <span class="n">host</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">5432</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pgdb</span><span class="o">=</span><span class="n">pg</span><span class="o">.</span><span class="n">PgDatabases</span><span class="p">(</span><span class="n">pgConnect</span><span class="o">=</span><span class="n">pgc</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pgc2</span><span class="o">=</span><span class="n">pgdb</span><span class="o">.</span><span class="n">createDatabase</span><span class="p">(</span><span class="n">databaseName</span><span class="o">=</span><span class="s2">&quot;pgoperationstest&quot;</span><span class="p">,</span>
            <span class="n">addPostgisExtension</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">closeNewConection</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pgc2</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;create schema d&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pgc2</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;create table d.points (gid serial primary key, description varchar, depth double precision, geom geometry(&#39;POINT&#39;,25831))&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pgc2</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pgc2</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pgc</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</code></pre></div>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pgConnect</code></td>
        <td><code>PgConnect</code></td>
        <td><p>PgConnect instance.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pgConnect</span><span class="p">:</span> <span class="n">PgConnect</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Constructor</span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt; pgc=pg.PgConnect(database=&#39;postgres&#39;, user=&quot;postgres&quot;, password=&quot;postgres&quot;, </span>
<span class="sd">                    host=&quot;localhost&quot;,port=5432)</span>
<span class="sd">        &gt;&gt;&gt; pgdb=pg.PgDatabases(pgConnect=pgc)</span>
<span class="sd">        &gt;&gt;&gt; pgc2=pgdb.createDatabase(databaseName=&quot;pgoperationstest&quot;,</span>
<span class="sd">                    addPostgisExtension=True,closeNewConection=False)</span>
<span class="sd">        &gt;&gt;&gt; pgc2.cursor.execute(&quot;create schema d&quot;)</span>
<span class="sd">        &gt;&gt;&gt; pgc2.cursor.execute(&quot;create table d.points (gid serial primary key, description varchar, depth double precision, geom geometry(&#39;POINT&#39;,25831))&quot;)</span>
<span class="sd">        &gt;&gt;&gt; pgc2.commit()</span>
<span class="sd">        &gt;&gt;&gt; pgc2.disconnect()</span>
<span class="sd">        &gt;&gt;&gt; pgc.disconnect()</span>

<span class="sd">    Args:</span>
<span class="sd">        pgConnect: PgConnect instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pgConnect</span><span class="o">=</span><span class="n">pgConnect</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgDatabases.createDatabase" class="doc doc-heading">
<code class="highlight language-python"><span class="n">createDatabase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">databaseName</span><span class="p">,</span> <span class="n">addPostgisExtension</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">closeNewConnection</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Create a database.</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">pgc2</span><span class="o">=</span><span class="n">pgdb</span><span class="o">.</span><span class="n">createDatabase</span><span class="p">(</span><span class="n">databaseName</span><span class="o">=</span><span class="s2">&quot;pgoperationstest&quot;</span><span class="p">,</span>
        <span class="n">addPostgisExtension</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">closeNewConection</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>databaseName</code></td>
        <td><code>str</code></td>
        <td><p>The database name.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>addPostgisExtension</code></td>
        <td><code>bool</code></td>
        <td><p>Whether or not add the PostGIS extension to the new database. Default True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>closeNewConnection</code></td>
        <td><code>bool</code></td>
        <td><p>Whether or not to close the connection to the new database. Default True.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>PgConnect</code></td>
      <td><p>A PgConnect instance to manage the newly created database.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">createDatabase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">databaseName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">addPostgisExtension</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> 
        <span class="n">closeNewConnection</span><span class="p">:</span><span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PgConnect</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Create a database.</span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt; pgc2=pgdb.createDatabase(databaseName=&quot;pgoperationstest&quot;,</span>
<span class="sd">                addPostgisExtension=True,closeNewConection=False)</span>
<span class="sd">    Args:</span>
<span class="sd">        databaseName: The database name.</span>
<span class="sd">        addPostgisExtension: Whether or not add the PostGIS extension to the new database. Default True.</span>
<span class="sd">        closeNewConnection: Whether or not to close the connection to the new database. Default True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A PgConnect instance to manage the newly created database.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pgConnect</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="n">ISOLATION_LEVEL_AUTOCOMMIT</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pgConnect</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;create database &#39;</span> <span class="o">+</span> <span class="n">databaseName</span><span class="p">)</span>
    <span class="n">pgConnect</span><span class="p">:</span> <span class="n">PgConnect</span><span class="o">=</span><span class="n">PgConnect</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="n">databaseName</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnect</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> 
        <span class="n">password</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnect</span><span class="o">.</span><span class="n">password</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgConnect</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> 
        <span class="n">port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnect</span><span class="o">.</span><span class="n">port</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">addPostgisExtension</span><span class="p">:</span>
        <span class="n">pgConnect</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;create extension postgis&quot;</span><span class="p">)</span>
        <span class="n">pgConnect</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">closeNewConnection</span><span class="p">:</span>
        <span class="n">pgConnect</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">pgConnect</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgDatabases.dropDatabase" class="doc doc-heading">
<code class="highlight language-python"><span class="n">dropDatabase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">databaseName</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Deletes a database.</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">pgdb</span><span class="o">.</span><span class="n">dropDatabase</span><span class="p">(</span><span class="s2">&quot;pgoperationstest&quot;</span><span class="p">)</span>
</code></pre></div>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">dropDatabase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">databaseName</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deletes a database.</span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt; pgdb.dropDatabase(&quot;pgoperationstest&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pgConnect</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="n">ISOLATION_LEVEL_AUTOCOMMIT</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pgConnect</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;drop database &#39;</span> <span class="o">+</span> <span class="n">databaseName</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h2 id="src.pgOperations.pgOperations.PgOperations" class="doc doc-heading">
        <code>
PgOperations        </code>



</h2>

    <div class="doc doc-contents ">

      <p>Perform the most common operations with PostGIS: insert, delete, update and select. 
To initialise this class it is necessary a<br />
<a class="autorefs autorefs-internal" href="#src.pgOperations.pgOperations.PgConnection">PgConnection</a>, 
or a <a class="autorefs autorefs-internal" href="#src.pgOperations.pgOperations.PgConnect">PgConnect</a> instance. </p>
<p>All the next examples use the variable pgc (a PgConnect instance), the database
and the table d.points created in the The 
<a href="../tutorials/#create-a-table" target="_blank">Create table</a> 
example. The d.points table has the fields <code>gid</code>, <code>description</code>, <code>deph</code> and <code>geom</code>.</p>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PgOperations</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Perform the most common operations with PostGIS: insert, delete, update and select. </span>
<span class="sd">    To initialise this class it is necessary a  </span>
<span class="sd">    [PgConnection][src.pgOperations.pgOperations.PgConnection], </span>
<span class="sd">    or a [PgConnect][src.pgOperations.pgOperations.PgConnect] instance. </span>

<span class="sd">    All the next examples use the variable pgc (a PgConnect instance), the database</span>
<span class="sd">    and the table d.points created in the The </span>
<span class="sd">    &lt;a href=&quot;../tutorials/#create-a-table&quot; target=&quot;_blank&quot;&gt;Create table&lt;/a&gt; </span>
<span class="sd">    example. The d.points table has the fields `gid`, `description`, `deph` and `geom`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">query</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">global_print_queries</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">pgConnection</span> <span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PgConnect</span><span class="p">,</span> <span class="n">PgConnection</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span>
    <span class="n">autoCommit</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pgConnection</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PgConnect</span><span class="p">,</span> <span class="n">PgConnection</span><span class="p">],</span> 
                <span class="n">autoCommit</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">global_print_queries</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor</span>

<span class="sd">        Examples:</span>

<span class="sd">            &gt;&gt;&gt; pgo=PgOperations(pgConnection=pgc, autoCommit=True, global_print_queries=True)</span>

<span class="sd">        Args:</span>
<span class="sd">            pgConnection: PgConnection or PgConnect instance.</span>
<span class="sd">            autoCommit: Whether or not perform a commit after each class </span>
<span class="sd">                method call. Default True.</span>
<span class="sd">            global_print_queries: For debugging purposes. If True </span>
<span class="sd">                all the methods will print the </span>
<span class="sd">                SQL sentences. All the methods of this class have the parameter `print_query`,</span>
<span class="sd">                if any of both variables, `global_print_queries` or `print_query`,</span>
<span class="sd">                is True, the SQL queries and data will be printed. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">=</span><span class="n">pgConnection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoCommit</span><span class="o">=</span><span class="n">autoCommit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span><span class="o">=</span><span class="n">global_print_queries</span>

    <span class="k">def</span> <span class="nf">pgInsert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
            <span class="n">fieldsAndValues</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">FieldsAndValuesBase</span><span class="p">,</span><span class="n">FieldsAndValues</span><span class="p">],</span> 
            <span class="n">str_fields_returning</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">print_query</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">list</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Inserts a row in a table.</span>

<span class="sd">        See examples of use in  &lt;a href=&quot;../tutorials/#insert&quot; target=&quot;_blank&quot;&gt;Examples of insert&lt;/a&gt;.</span>

<span class="sd">        Args:</span>
<span class="sd">            table_name: Table name to insert the row.</span>
<span class="sd">            fieldsAndValues: Object containing SQL expression pars of the SQL, and the</span>
<span class="sd">                list of values.</span>
<span class="sd">            str_fields_returning: A string with the field values, comma separated, of the</span>
<span class="sd">                inserted row to be returned, e.g. ´&#39;gid,date&#39;´. The values are put in a </span>
<span class="sd">                dictionary, and the dictionary is put in a list, e.g. `[{&#39;gid&#39;: 25, &#39;date&#39;: &#39;2022-11-13&#39;}]`.</span>
<span class="sd">                If this parameter is not set None is returned.</span>
<span class="sd">            print_query: If `True` the SQL sentence is printed in the screen. This option</span>
<span class="sd">                may be is interesting for debugging.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An empty list `[]` or a list with a dictionary, e.g. `[{&#39;gid&#39;: 25, &#39;date&#39;: &#39;2022-11-13&#39;}]`, depending of the value of the parameter ´str_fields_returning´.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">conn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">conn</span>
        <span class="n">cursor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span>

        <span class="n">str_field_names</span><span class="o">=</span><span class="n">fieldsAndValues</span><span class="o">.</span><span class="n">str_field_names</span>
        <span class="n">list_field_values</span><span class="o">=</span><span class="n">fieldsAndValues</span><span class="o">.</span><span class="n">list_field_values</span>
        <span class="n">str_s_values</span><span class="o">=</span><span class="n">fieldsAndValues</span><span class="o">.</span><span class="n">str_s_values</span>

        <span class="c1">#cons_ins=&#39;insert into {0} ({1}) values (%s,st_geometryfromtext(%s,25830))&#39;.format(table_name, string_fields_to_set)</span>
        <span class="n">cons_ins</span><span class="o">=</span><span class="s1">&#39;insert into </span><span class="si">{0}</span><span class="s1"> (</span><span class="si">{1}</span><span class="s1">) values (</span><span class="si">{2}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">str_field_names</span><span class="p">,</span> <span class="n">str_s_values</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">str_fields_returning</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cons_ins</span> <span class="o">=</span><span class="n">cons_ins</span> <span class="o">+</span> <span class="s1">&#39; returning &#39;</span> <span class="o">+</span> <span class="n">str_fields_returning</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pgInsert&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Query: &#39;</span><span class="p">,</span> <span class="n">cons_ins</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Values: &#39;</span><span class="p">,</span> <span class="n">list_field_values</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">=</span><span class="n">cons_ins</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons_ins</span><span class="p">,</span><span class="n">list_field_values</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoCommit</span><span class="p">:</span>
            <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">str_fields_returning</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">returning</span><span class="o">=</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
            <span class="n">fieldNames</span><span class="o">=</span><span class="n">str_fields_returning</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="n">d</span><span class="o">=</span><span class="p">{}</span>
            <span class="n">i</span><span class="o">=</span><span class="mi">0</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fieldNames</span><span class="p">:</span>
                <span class="n">d</span><span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span><span class="o">=</span><span class="n">returning</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
                <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">d</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">pgUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">fieldsAndValues</span><span class="p">:</span> <span class="n">FieldsAndValues</span><span class="p">,</span> 
                <span class="n">whereClause</span><span class="p">:</span> <span class="n">WhereClause</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                <span class="n">print_query</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates a table</span>

<span class="sd">        See examples of use in  &lt;a href=&quot;../tutorials/#update&quot; target=&quot;_blank&quot;&gt;Examples of update&lt;/a&gt;.</span>

<span class="sd">        Args:</span>

<span class="sd">            table_name: table name included the schema. Ej. &quot;d.linde&quot;. </span>
<span class="sd">                Mandatory specify the schema name, even if the table</span>
<span class="sd">                is in the schema `public`: &quot;public.tablename&quot;.</span>
<span class="sd">            fieldsAndValues: Object containing SQL expression pars of the SQL, and the</span>
<span class="sd">                list of values.</span>
<span class="sd">            whereClause: Data of the where clause. If it is none all the rows will be updated.</span>
<span class="sd">            print_query: print_query: If `True` the SQL sentence is printed in the screen. This option</span>
<span class="sd">                may be is interesting for debugging.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The number of updated rows.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">conn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">conn</span>
        <span class="n">cursor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span>

        <span class="n">str_field_names</span><span class="o">=</span><span class="n">fieldsAndValues</span><span class="o">.</span><span class="n">str_field_names</span>
        <span class="n">list_field_values</span><span class="o">=</span><span class="n">fieldsAndValues</span><span class="o">.</span><span class="n">list_field_values</span>
        <span class="n">str_s_values</span><span class="o">=</span><span class="n">fieldsAndValues</span><span class="o">.</span><span class="n">str_s_values</span>

        <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;update </span><span class="si">{table_name}</span><span class="s1"> set (</span><span class="si">{str_field_names}</span><span class="s1">) = row(</span><span class="si">{str_s_values}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">table_name</span><span class="o">=</span><span class="n">table_name</span><span class="p">,</span><span class="n">str_field_names</span><span class="o">=</span><span class="n">str_field_names</span><span class="p">,</span><span class="n">str_s_values</span><span class="o">=</span><span class="n">str_s_values</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">whereClause</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cons</span> <span class="o">+=</span> <span class="s1">&#39; where &#39;</span> <span class="o">+</span> <span class="n">whereClause</span><span class="o">.</span><span class="n">where_clause</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">,</span><span class="n">list_field_values</span> <span class="o">+</span> <span class="n">whereClause</span><span class="o">.</span><span class="n">where_values_list</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pgUpdate&#39;</span><span class="p">)</span>
            <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Query: &#39;</span> <span class="o">+</span> <span class="n">cons</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">whereClause</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">whereClause</span><span class="o">.</span><span class="n">printProperties</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;New field values: &#39;</span><span class="p">,</span> <span class="n">list_field_values</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of rows updated: &#39;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoCommit</span><span class="p">:</span>
            <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">=</span><span class="n">cons</span>
        <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span>

    <span class="k">def</span> <span class="nf">pgDelete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">whereClause</span><span class="p">:</span> <span class="n">WhereClause</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">print_query</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete rows from a table. Example of use:</span>

<span class="sd">        See an example of use in  </span>
<span class="sd">        &lt;a href=&quot;../tutorials/#delete&quot; target=&quot;_blank&quot;&gt;Example of delete&lt;/a&gt;.</span>

<span class="sd">        Args:</span>

<span class="sd">            table_name: table name included the schema, e.g. `d.linde`. </span>
<span class="sd">                It is mandatory to specify the schema name: `public.tablename`</span>
<span class="sd">            whereClause: Data of the where clause. If it is None, all the rows</span>
<span class="sd">                will be deleted.</span>
<span class="sd">            print_query: If True, will print the SQL query, form debugging purposes.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The number of deleted rows.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">conn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">conn</span>
        <span class="n">cursor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span>
        <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;delete from </span><span class="si">{table_name}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">table_name</span><span class="o">=</span><span class="n">table_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">whereClause</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cons</span> <span class="o">+=</span> <span class="s1">&#39; where &#39;</span> <span class="o">+</span> <span class="n">whereClause</span><span class="o">.</span><span class="n">where_clause</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">,</span> <span class="n">whereClause</span><span class="o">.</span><span class="n">where_values_list</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">=</span><span class="n">cons</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pgDelete&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Query: &#39;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">whereClause</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">whereClause</span><span class="o">.</span><span class="n">printProperties</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of rows deleted: &#39;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span>

    <span class="k">def</span> <span class="nf">pgDeleteWithFiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">field_name_with_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="n">whereClause</span><span class="p">:</span> <span class="n">WhereClause</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">base_path</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
            <span class="n">print_query</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        **This method only has been tested in Linux systems**</span>

<span class="sd">        Deletes the selected rows, and their associated files in the hard disk.</span>
<span class="sd">        The rows have to have a field with the file names to delete. The file names</span>
<span class="sd">        can contain an absolute path, or a relative path. It is possible to complete</span>
<span class="sd">        relative paths with the parameter `base_path`.</span>

<span class="sd">        Before the rows be deleted, the files are deleted.</span>

<span class="sd">        See an example of use in </span>
<span class="sd">        &lt;a href=&quot;../tutorials/#delete-rows-and-files&quot; target=&quot;_blank&quot;&gt;Delete rows and files&lt;/a&gt;.</span>

<span class="sd">        Args:</span>

<span class="sd">            table_name: Table name with schema, e.g. `public.customers`. </span>
<span class="sd">            field_name_with_file_name: field in the table which contains the file name, e.g. `img`.</span>
<span class="sd">            whereClause: Data of the where clause. If it is None, all the rows and files</span>
<span class="sd">                            will be deleted.</span>
<span class="sd">            base_path: Base path to prepose to the file names. Can end with or without `/`, e.g. </span>
<span class="sd">                `/home/user/app/media/customers/img`.</span>
<span class="sd">            print_query: for debugging purposes. If true will print the SQL sentences and values.</span>

<span class="sd">        Returns:</span>

<span class="sd">            Dictionary with the following information: </span>
<span class="sd">                number of rows deleted, list of file names deleted, </span>
<span class="sd">                list of filenames not deleted, the base path, e.g. </span>
<span class="sd">                {&#39;numOfRowsDeleted&#39;: 3, &#39;deletedFileNames&#39;: [], </span>
<span class="sd">                &#39;notDeletedFilenames&#39;: [&#39;image1.jpg&#39;, &#39;image2.jpg&#39;, &#39;image3.jpg&#39;], </span>
<span class="sd">                &#39;base_path&#39;: &#39;/home/joamona/temp/img&#39;}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgSelect</span><span class="p">(</span><span class="n">table_name</span><span class="o">=</span><span class="n">table_name</span><span class="p">,</span> 
            <span class="n">string_fields_to_select</span><span class="o">=</span><span class="n">field_name_with_file_name</span><span class="p">,</span> 
            <span class="n">whereClause</span><span class="o">=</span> <span class="n">whereClause</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="n">print_query</span><span class="p">)</span>
        <span class="n">deletedFileNames</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">notExistingFilenames</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">r</span><span class="p">:</span>
            <span class="n">deleted</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgDeleteFileInRow</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">field_name_with_file_name</span><span class="p">,</span><span class="n">base_path</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">deleted</span><span class="p">:</span>
                <span class="n">deletedFileNames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">field_name_with_file_name</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">notExistingFilenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">field_name_with_file_name</span><span class="p">])</span>

        <span class="n">n</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgDelete</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">whereClause</span><span class="o">=</span><span class="n">whereClause</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;numOfRowsDeleted&#39;</span><span class="p">:</span> <span class="n">n</span><span class="p">,</span> <span class="s1">&#39;deletedFileNames&#39;</span><span class="p">:</span> <span class="n">deletedFileNames</span><span class="p">,</span> 
            <span class="s1">&#39;notDeletedFilenames&#39;</span><span class="p">:</span> <span class="n">notExistingFilenames</span><span class="p">,</span> <span class="s1">&#39;base_path&#39;</span><span class="p">:</span> <span class="n">base_path</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">pgDeleteFileInRow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">row</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">field_name_with_file_name</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">base_path</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        If you have a row stored in a dictionary, this function</span>
<span class="sd">        deletes a file in the file system. The the filename must be one of the values</span>
<span class="sd">        of the dictionary. **This method has been texted only in Linux systems**.</span>

<span class="sd">        Examples:</span>

<span class="sd">            &gt;&gt;&gt;d={&#39;gid&#39;: 25, &#39;description&#39;: &#39;customer&#39;, &#39;img&#39;: &#39;00012325.jpg&#39;}</span>
<span class="sd">            &gt;&gt;&gt;resp=pgo.deleteFileInRow(row=d,field_name_with_file_name=&#39;img&#39;,</span>
<span class="sd">                base_path=&#39;/home/user/media/customers/img&#39;)</span>

<span class="sd">        Args:</span>

<span class="sd">            row: A Python dictionary with the filename to delete, </span>
<span class="sd">                e.g. {&#39;gid&#39;: 25, &#39;description&#39;: &#39;customer&#39;, &#39;img&#39;: &#39;00012325.jpg&#39;}</span>
<span class="sd">            field_name_with_file_name: field in the table which contains the file name. </span>
<span class="sd">            base_path: If the `field_name_with_file_name` field contains relative paths,</span>
<span class="sd">                    or only the file name, you can specify in this parameter the</span>
<span class="sd">                    base path to complete the absolute path to the file. Does not</span>
<span class="sd">                    matters if the base_path ends in the character `/` or not, </span>
<span class="sd">                    e.g. `/home/user/media/images/`, or  `/home/user/media/images`.</span>

<span class="sd">        Returns: </span>
<span class="sd">            True if the file could be deleted. Otherwise False.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">base_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1">#print(base_path[len(base_path)-1])</span>
            <span class="k">if</span> <span class="n">base_path</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">base_path</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span> <span class="s1">&#39;/&#39;</span><span class="p">:</span>
                <span class="n">base_path</span> <span class="o">=</span> <span class="n">base_path</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">base_path</span> <span class="o">=</span> <span class="n">base_path</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span>

        <span class="n">imageName</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="n">field_name_with_file_name</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">base_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">imageName</span> <span class="o">=</span> <span class="n">base_path</span> <span class="o">+</span> <span class="n">imageName</span> 

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">imageName</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">imageName</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">pgSelect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">string_fields_to_select</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> 
                <span class="n">whereClause</span><span class="p">:</span> <span class="n">WhereClause</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                <span class="n">get_rows_as_dicts</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">orderBy</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">groupBy</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                <span class="n">print_query</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">list</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Select rows of a table.</span>

<span class="sd">        See examples of use in  &lt;a href=&quot;../tutorials/#select&quot; target=&quot;_blank&quot;&gt;Examples of select&lt;/a&gt;.</span>

<span class="sd">        Args:</span>
<span class="sd">            table_name: table name included the schema, e.g. &quot;d.linde&quot;. </span>
<span class="sd">                Mandatory specify the schema name, even if the table is</span>
<span class="sd">                in the schema `public`: &quot;public.tablename&quot;.</span>
<span class="sd">            string_fields_to_select: string with the fields to select, comma separated, </span>
<span class="sd">                e.g. &#39;gid, description, area, st_asgeojson(geom)&#39;. You can use &#39;*&#39; </span>
<span class="sd">                to select all table fields.</span>
<span class="sd">            whereClause: Data of the where clause. If it is none all the rows will be selected.</span>
<span class="sd">            get_rows_as_dicts: If True the function will return a list of dictionaries,</span>
<span class="sd">                each dictionary representing a selected row. If False the function</span>
<span class="sd">                will return a list of tuples. Each list element represents a selected row.</span>
<span class="sd">            limit: The maximum rows to return.</span>
<span class="sd">            orderBy: Order by SQL clause, e.g. &quot;depth desc&quot;. Will order the results</span>
<span class="sd">                by the field depth descending. **The words `order by` must not be specified**.</span>
<span class="sd">            groupBy: Group by SQL clause, e.g. &quot;depth&quot;. Will group the results</span>
<span class="sd">                by the field depth. **The words `group by` must not be specified**.</span>
<span class="sd">            print_query: print_query: If `True` the SQL sentence is printed in the screen. This option</span>
<span class="sd">                may be is interesting for debugging.</span>

<span class="sd">        Returns:</span>

<span class="sd">            An empty list, if there is not any row selected.</span>
<span class="sd">            A list of dictionaries, each dictionary </span>
<span class="sd">                representing a selected row, if `get_rows_as_dicts` is True. </span>
<span class="sd">            A list of lists, each list </span>
<span class="sd">                representing a selected row, if `get_rows_as_dicts` is True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cursor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span>

        <span class="k">if</span> <span class="n">orderBy</span><span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">orderBy</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">orderBy</span> <span class="o">=</span> <span class="s2">&quot;order by &quot;</span> <span class="o">+</span> <span class="n">orderBy</span>

        <span class="k">if</span> <span class="n">groupBy</span><span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">groupBy</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">groupBy</span> <span class="o">=</span> <span class="s2">&quot;group by &quot;</span> <span class="o">+</span> <span class="n">groupBy</span>

        <span class="c1">#executes the string. The list_val_cond_where has the values of the %s in the select string by order</span>
        <span class="k">if</span> <span class="n">whereClause</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">get_rows_as_dicts</span><span class="p">:</span>
                <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;SELECT array_to_json(array_agg(registros)) FROM (select </span><span class="si">{string_fields_to_select}</span><span class="s1"> from </span><span class="si">{table_name}</span><span class="s1"> </span><span class="si">{groupBy}</span><span class="s1"> </span><span class="si">{orderBy}</span><span class="s1"> limit </span><span class="si">{limit}</span><span class="s1">) as registros&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">string_fields_to_select</span><span class="o">=</span><span class="n">string_fields_to_select</span><span class="p">,</span>
                    <span class="n">table_name</span><span class="o">=</span><span class="n">table_name</span><span class="p">,</span><span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">orderBy</span><span class="o">=</span><span class="n">orderBy</span><span class="p">,</span> <span class="n">groupBy</span><span class="o">=</span><span class="n">groupBy</span><span class="p">)</span>          
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cons</span> <span class="o">=</span> <span class="s1">&#39;select </span><span class="si">{string_fields_to_select}</span><span class="s1"> from </span><span class="si">{table_name}</span><span class="s1"> </span><span class="si">{groupBy}</span><span class="s1"> </span><span class="si">{orderBy}</span><span class="s1"> limit </span><span class="si">{limit}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">string_fields_to_select</span><span class="o">=</span><span class="n">string_fields_to_select</span><span class="p">,</span>
                    <span class="n">table_name</span><span class="o">=</span><span class="n">table_name</span><span class="p">,</span><span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">orderBy</span><span class="o">=</span><span class="n">orderBy</span><span class="p">,</span> <span class="n">groupBy</span><span class="o">=</span><span class="n">groupBy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">=</span><span class="n">cons</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">get_rows_as_dicts</span><span class="p">:</span>
                <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;SELECT array_to_json(array_agg(registros)) FROM (select </span><span class="si">{string_fields_to_select}</span><span class="s1"> from </span><span class="si">{table_name}</span><span class="s1"> </span><span class="si">{cond_where}</span><span class="s1"> </span><span class="si">{groupBy}</span><span class="s1"> </span><span class="si">{orderBy}</span><span class="s1"> limit </span><span class="si">{limit}</span><span class="s1">) as registros&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">string_fields_to_select</span><span class="o">=</span><span class="n">string_fields_to_select</span><span class="p">,</span><span class="n">table_name</span><span class="o">=</span><span class="n">table_name</span><span class="p">,</span>
                    <span class="n">cond_where</span><span class="o">=</span> <span class="s2">&quot; where &quot;</span> <span class="o">+</span> <span class="n">whereClause</span><span class="o">.</span><span class="n">where_clause</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> 
                    <span class="n">orderBy</span><span class="o">=</span><span class="n">orderBy</span><span class="p">,</span> <span class="n">groupBy</span><span class="o">=</span><span class="n">groupBy</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;select </span><span class="si">{string_fields_to_select}</span><span class="s1"> from </span><span class="si">{table_name}</span><span class="s1"> </span><span class="si">{cond_where}</span><span class="s1"> </span><span class="si">{groupBy}</span><span class="s1"> </span><span class="si">{orderBy}</span><span class="s1"> limit </span><span class="si">{limit}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">string_fields_to_select</span><span class="o">=</span><span class="n">string_fields_to_select</span><span class="p">,</span><span class="n">table_name</span><span class="o">=</span><span class="n">table_name</span><span class="p">,</span>
                    <span class="n">cond_where</span><span class="o">=</span> <span class="s2">&quot; where &quot;</span> <span class="o">+</span> <span class="n">whereClause</span><span class="o">.</span><span class="n">where_clause</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> 
                    <span class="n">orderBy</span><span class="o">=</span><span class="n">orderBy</span><span class="p">,</span> <span class="n">groupBy</span><span class="o">=</span><span class="n">groupBy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">=</span><span class="n">cons</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">,</span> <span class="n">whereClause</span><span class="o">.</span><span class="n">where_values_list</span><span class="p">)</span>

        <span class="c1">#gets all rows </span>
        <span class="n">lista</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">get_rows_as_dicts</span><span class="p">:</span>
            <span class="n">r</span><span class="o">=</span><span class="n">lista</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">r</span><span class="o">=</span><span class="n">lista</span>
        <span class="k">if</span> <span class="n">r</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#there wheren&#39;t selected rows</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#in ubuntu 14.04 r is a string, in 16.04 is a list</span>
            <span class="c1">#if it is a string is converted to list</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">r</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pgSelect&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Query: &quot;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">whereClause</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">whereClause</span><span class="o">.</span><span class="n">printProperties</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Num of selected rows: &quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">r</span>

    <span class="k">def</span> <span class="nf">pgGetTableFieldNames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
            <span class="n">selectGeometryFieldOptions</span><span class="p">:</span> <span class="n">SelectGeometryFieldOptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">list_fields_to_remove</span><span class="p">:</span> <span class="nb">list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
            <span class="n">returnAsString</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">print_query</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the field names of a table. Depending of the `returnAsString` parameter</span>
<span class="sd">        returns a string or a list.</span>
<span class="sd">        The geometry field name can be returned with one of the following formats:</span>
<span class="sd">        &#39;geom&#39;, &#39;st_astext(geom)&#39;, &#39;st_asgeojson(geom)&#39;, &#39;st_transform(st_asgeojson(geom),EPSG),</span>
<span class="sd">        or &#39;st_transform(st_astext(geom),EPSG). The objetive with this is the output of</span>
<span class="sd">        this function serves to input for the parameter `list_fields_to_select`</span>
<span class="sd">        of the method pgSelect.</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt;gf=pg.SelectGeometryFormat()</span>
<span class="sd">            &gt;&gt;&gt;gfo=pg.SelectGeometryFieldOptions(geom_field_name=&#39;geom&#39;,</span>
<span class="sd">                select_geometry_format=gf.geojson, epsg_to_reproject=&#39;25831&#39;)#</span>
<span class="sd">            &gt;&gt;&gt;fieldNames=pgo.pgGetTableFieldNames(&#39;d.points&#39;,gfo,list_fields_to_remove=[&#39;description&#39;],</span>
<span class="sd">                returnAsString=True)</span>
<span class="sd">            &gt;&gt;&gt;wc=pg.WhereClause(where_clause=&#39;gid=%s&#39;,where_values_list=[3])</span>
<span class="sd">            &gt;&gt;&gt;res=pgo.pgSelect(table_name=&#39;d.points&#39;, string_fields_to_select=fieldNames,whereClause=wc)</span>

<span class="sd">        Args:</span>
<span class="sd">            table_name: </span>
<span class="sd">            selectGeometryFieldOptions: </span>
<span class="sd">            list_fields_to_remove: </span>
<span class="sd">            returnAsString: </span>
<span class="sd">            print_query: </span>

<span class="sd">        Returns: </span>
<span class="sd">            If `returnAsString` is False, a list of the field names the table, </span>
<span class="sd">            If `returnAsString` is False, a string with field names of the a table </span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">consulta</span><span class="o">=</span><span class="s2">&quot;SELECT column_name FROM information_schema.columns WHERE table_schema=</span><span class="si">%s</span><span class="s2"> and table_name = </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">;</span>
        <span class="n">lis</span><span class="o">=</span><span class="n">table_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>

        <span class="n">cursor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">consulta</span><span class="p">,</span><span class="n">lis</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">listaValores</span><span class="o">=</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span><span class="c1">#es una lista de tuplas.</span>
                <span class="c1">#cada tupla es una fila. En este caso, la fila tiene un</span>
                <span class="c1">#unico elemento, que es el nombre del campo.</span>

        <span class="k">if</span> <span class="n">selectGeometryFieldOptions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">geom_field_name</span><span class="p">,)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">listaValores</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;pgGetTableFieldNames. The geometry field name </span><span class="si">{0}</span><span class="s2"> is not a field of the table </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">geom_field_name</span><span class="p">,</span> <span class="n">table_name</span><span class="p">))</span>

        <span class="n">listaNombreCampos</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">fila2</span> <span class="ow">in</span> <span class="n">listaValores</span><span class="p">:</span>
            <span class="n">valor</span><span class="o">=</span><span class="n">fila2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">list_fields_to_remove</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">valor</span> <span class="ow">in</span> <span class="n">list_fields_to_remove</span><span class="p">:</span>
                    <span class="k">continue</span>
            <span class="k">if</span> <span class="n">selectGeometryFieldOptions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">valor</span><span class="o">==</span><span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">geom_field_name</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">epsg_to_reproject</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">if</span> <span class="s1">&#39;binary&#39;</span> <span class="o">==</span> <span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">select_geometry_format</span><span class="p">:</span>
                            <span class="n">valor</span><span class="o">=</span><span class="s1">&#39;st_transform(</span><span class="si">{geom_field_name}</span><span class="s1">,</span><span class="si">{epsg_to_reproject}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                <span class="n">geom_field_name</span> <span class="o">=</span> <span class="n">valor</span><span class="p">,</span> 
                                <span class="n">epsg_to_reproject</span><span class="o">=</span><span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">epsg_to_reproject</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="s1">&#39;text&#39;</span> <span class="o">==</span> <span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">select_geometry_format</span><span class="p">:</span>
                            <span class="n">valor</span><span class="o">=</span><span class="s1">&#39;st_astext(st_transform(</span><span class="si">{geom_field_name}</span><span class="s1">,</span><span class="si">{epsg_to_reproject}</span><span class="s1">))&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                <span class="n">geom_field_name</span> <span class="o">=</span> <span class="n">valor</span><span class="p">,</span> 
                                <span class="n">epsg_to_reproject</span><span class="o">=</span><span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">epsg_to_reproject</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="s1">&#39;geojson&#39;</span> <span class="o">==</span> <span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">select_geometry_format</span><span class="p">:</span>
                            <span class="n">valor</span><span class="o">=</span><span class="s1">&#39;st_asgeojson(st_transform(</span><span class="si">{geom_field_name}</span><span class="s1">,</span><span class="si">{epsg_to_reproject}</span><span class="s1">))&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                            <span class="n">geom_field_name</span> <span class="o">=</span> <span class="n">valor</span><span class="p">,</span> 
                            <span class="n">epsg_to_reproject</span><span class="o">=</span><span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">epsg_to_reproject</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="s1">&#39;binary&#39;</span> <span class="o">==</span> <span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">select_geometry_format</span><span class="p">:</span>
                                <span class="n">valor</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">{geometry_field_name}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">geom_field_name</span> <span class="o">=</span> <span class="n">valor</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="s1">&#39;text&#39;</span> <span class="o">==</span> <span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">select_geometry_format</span><span class="p">:</span>
                            <span class="n">valor</span><span class="o">=</span><span class="s1">&#39;st_astext(</span><span class="si">{geom_field_name}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">geom_field_name</span> <span class="o">=</span> <span class="n">valor</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="s1">&#39;geojson&#39;</span> <span class="o">==</span> <span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">select_geometry_format</span><span class="p">:</span>
                            <span class="n">valor</span><span class="o">=</span><span class="s1">&#39;st_asgeojson(</span><span class="si">{geom_field_name}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">geom_field_name</span> <span class="o">=</span> <span class="n">valor</span><span class="p">)</span>
            <span class="n">listaNombreCampos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">valor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">=</span><span class="n">consulta</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pgGetTableFieldNames&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Query: &#39;</span><span class="p">,</span> <span class="n">consulta</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fields list:&#39;</span><span class="p">,</span> <span class="n">listaNombreCampos</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">returnAsString</span><span class="p">:</span>
            <span class="n">s</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
            <span class="k">for</span> <span class="n">campo</span> <span class="ow">in</span> <span class="n">listaNombreCampos</span><span class="p">:</span>
                <span class="n">s</span><span class="o">=</span><span class="n">s</span> <span class="o">+</span> <span class="n">campo</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span>
            <span class="k">return</span> <span class="n">s</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">listaNombreCampos</span>   

    <span class="k">def</span> <span class="nf">pgTableExists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name_with_schema</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">print_query</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns True or False, depending on if the table exists in the database or not.</span>
<span class="sd">        table_name_with_schema: table name included the schema, e.g. &quot;d.boundary&quot;.</span>

<span class="sd">        Args:</span>

<span class="sd">            table_name_with_schema: The table name, e.g. &quot;d.boundary&quot;</span>
<span class="sd">            print_query: For debugging purposes. If true will print the queries. </span>

<span class="sd">        Examples:</span>

<span class="sd">            &gt;&gt;&gt;res=pgo.pgTableExists(table_name_with_schema=&#39;d.points&#39;)</span>

<span class="sd">        Returns: </span>
<span class="sd">            True or False, depending on if the table exists in the database or not.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">l</span><span class="o">=</span><span class="n">table_name_with_schema</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="n">table_schema</span><span class="o">=</span><span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">table_name</span><span class="o">=</span><span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">cons</span><span class="o">=</span><span class="s2">&quot;SELECT EXISTS (SELECT 1 FROM   information_schema.tables WHERE  table_schema = </span><span class="si">%s</span><span class="s2"> AND    table_name = </span><span class="si">%s</span><span class="s2">)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">,[</span><span class="n">table_schema</span><span class="p">,</span> <span class="n">table_name</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pgTableExists&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Query:&#39;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
        <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">pgCreateTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">table_name_with_schema</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">fields_definition</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> 
        <span class="n">delete_table_if_exists</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">print_query</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a table. If the table already exists this method can delete it.</span>
<span class="sd">        Returns True if the table has been created, or false if the table</span>
<span class="sd">        already existed.</span>

<span class="sd">        See an example of use in </span>
<span class="sd">        &lt;a href=&quot;../tutorials/#delete-rows-and-files&quot;&gt;Delete rows and files&lt;/a&gt;.</span>

<span class="sd">        Examples:</span>

<span class="sd">            &gt;&gt;&gt;r=pgo.pgCreateTable(table_name_with_schema=&quot;d.customers&quot;,</span>
<span class="sd">            &gt;&gt;&gt;    fields_definition=&quot;gid serial, name varchar, img varchar&quot;,</span>
<span class="sd">            &gt;&gt;&gt;    delete_table_if_exists= True,print_query=False)</span>

<span class="sd">        Args:</span>

<span class="sd">            table_name_with_schema: The table name, including the schema, e.g. &#39;public.customers&#39;.</span>
<span class="sd">            fields_definition: String with the fields definitions. If any field name stars</span>
<span class="sd">                with a number, or has a space, must be quoted, e.g. </span>
<span class="sd">                &#39;gid serial primary key, natcode varchar,nameunit varchar,&quot;{fieldName}&quot; varchar&#39;.format(</span>
<span class="sd">                    fieldName=&#39;25_utm&#39;) </span>
<span class="sd">            delete_table_if_exists: If True will delete the table before create it. If False,</span>
<span class="sd">                if the table exists Psycopg2 will raise an error.</span>
<span class="sd">            print_query: For debugging purposes. If true the delete and create table</span>
<span class="sd">                sentences will be printed.</span>

<span class="sd">        Returns:</span>

<span class="sd">            True if the table has been created, or false if the table already existed,</span>
<span class="sd">                and was not deleted and created again, because the argument </span>
<span class="sd">                `delete_table_if_exists` was False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">schema</span><span class="o">=</span><span class="n">table_name_with_schema</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">tableName</span><span class="o">=</span><span class="n">table_name_with_schema</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgTableExists</span><span class="p">(</span><span class="n">table_name_with_schema</span><span class="o">=</span><span class="n">table_name_with_schema</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="n">print_query</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">delete_table_if_exists</span><span class="p">:</span>
                <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;drop table &quot;</span><span class="si">{schema}</span><span class="s1">&quot;.&quot;</span><span class="si">{tableName}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span><span class="n">tableName</span><span class="o">=</span><span class="n">tableName</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pgCreateTable&#39;</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Query to delete the table: &quot;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;create table &quot;</span><span class="si">{schema}</span><span class="s1">&quot;.&quot;</span><span class="si">{tableName}</span><span class="s1">&quot; (</span><span class="si">{fields_definition}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span><span class="n">tableName</span><span class="o">=</span><span class="n">tableName</span><span class="p">,</span><span class="n">fields_definition</span><span class="o">=</span><span class="n">fields_definition</span><span class="p">)</span>
        <span class="c1">#print(cons)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pgCreateTable&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Query to create the table: &quot;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">pgValueExists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name_with_schema</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">field_value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">print_query</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns True or False depending whether or not if a value exists in a column.</span>

<span class="sd">        Args:</span>
<span class="sd">            table_name_with_schema: Table name included the schema. Ej. &quot;d.linde&quot;. </span>
<span class="sd">            field_name: Column name, e.g. &quot;username&quot;. </span>
<span class="sd">            field_value: Any value in the column. </span>
<span class="sd">            print_query: For debugging purposes. If True will print </span>
<span class="sd">                the query and values in the function.</span>

<span class="sd">        Returns: </span>
<span class="sd">            True or False</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">cons</span><span class="o">=</span><span class="s2">&quot;SELECT exists (SELECT </span><span class="si">{0}</span><span class="s2"> FROM </span><span class="si">{1}</span><span class="s2"> WHERE </span><span class="si">{2}</span><span class="s2"> = </span><span class="si">%s</span><span class="s2"> LIMIT 1)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">table_name_with_schema</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">,[</span><span class="n">field_value</span><span class="p">])</span>
        <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pgValueExists&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Query: &quot;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Field name: &#39;</span><span class="si">{0}</span><span class="s2">&#39;. Field value: </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">field_value</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exists: &quot;</span><span class="p">,</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">pgDeleteAllTableRowsFromTableWithColumnValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tableName</span><span class="p">,</span> <span class="n">columnName</span><span class="p">,</span> <span class="n">columnValue</span><span class="p">):</span>
        <span class="c1">#deleteAllTableRowsFromTableWithColumnValue(tableName=&quot;public.work_images&quot;, columnName=&quot;color_works_gid&quot;, columnValue=25)</span>
        <span class="c1">#removes all the rows from public.work_images where color_works_gid=25</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgDelete</span><span class="p">(</span><span class="n">table_name</span><span class="o">=</span><span class="n">tableName</span><span class="p">,</span> <span class="n">cond_where</span><span class="o">=</span><span class="n">columnName</span> <span class="o">+</span> <span class="s2">&quot; =</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">list_values_cond_where</span><span class="o">=</span><span class="p">[</span><span class="n">columnValue</span><span class="p">])</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">













  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgOperations.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pgConnection</span><span class="p">,</span> <span class="n">autoCommit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">global_print_queries</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Constructor</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">pgo</span><span class="o">=</span><span class="n">PgOperations</span><span class="p">(</span><span class="n">pgConnection</span><span class="o">=</span><span class="n">pgc</span><span class="p">,</span> <span class="n">autoCommit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">global_print_queries</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pgConnection</code></td>
        <td><code>Union[src.pgOperations.pgOperations.PgConnect, src.pgOperations.pgOperations.PgConnection]</code></td>
        <td><p>PgConnection or PgConnect instance.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>autoCommit</code></td>
        <td><code>bool</code></td>
        <td><p>Whether or not perform a commit after each class 
method call. Default True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>global_print_queries</code></td>
        <td><code>bool</code></td>
        <td><p>For debugging purposes. If True 
all the methods will print the 
SQL sentences. All the methods of this class have the parameter <code>print_query</code>,
if any of both variables, <code>global_print_queries</code> or <code>print_query</code>,
is True, the SQL queries and data will be printed. </p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pgConnection</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PgConnect</span><span class="p">,</span> <span class="n">PgConnection</span><span class="p">],</span> 
            <span class="n">autoCommit</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">global_print_queries</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Constructor</span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt; pgo=PgOperations(pgConnection=pgc, autoCommit=True, global_print_queries=True)</span>

<span class="sd">    Args:</span>
<span class="sd">        pgConnection: PgConnection or PgConnect instance.</span>
<span class="sd">        autoCommit: Whether or not perform a commit after each class </span>
<span class="sd">            method call. Default True.</span>
<span class="sd">        global_print_queries: For debugging purposes. If True </span>
<span class="sd">            all the methods will print the </span>
<span class="sd">            SQL sentences. All the methods of this class have the parameter `print_query`,</span>
<span class="sd">            if any of both variables, `global_print_queries` or `print_query`,</span>
<span class="sd">            is True, the SQL queries and data will be printed. </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">=</span><span class="n">pgConnection</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">autoCommit</span><span class="o">=</span><span class="n">autoCommit</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span><span class="o">=</span><span class="n">global_print_queries</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgOperations.pgCreateTable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pgCreateTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name_with_schema</span><span class="p">,</span> <span class="n">fields_definition</span><span class="p">,</span> <span class="n">delete_table_if_exists</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Creates a table. If the table already exists this method can delete it.
Returns True if the table has been created, or false if the table
already existed.</p>
<p>See an example of use in 
<a href="../tutorials/#delete-rows-and-files">Delete rows and files</a>.</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="n">r</span><span class="o">=</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgCreateTable</span><span class="p">(</span><span class="n">table_name_with_schema</span><span class="o">=</span><span class="s2">&quot;d.customers&quot;</span><span class="p">,</span>
<span class="o">&gt;&gt;&gt;</span>    <span class="n">fields_definition</span><span class="o">=</span><span class="s2">&quot;gid serial, name varchar, img varchar&quot;</span><span class="p">,</span>
<span class="o">&gt;&gt;&gt;</span>    <span class="n">delete_table_if_exists</span><span class="o">=</span> <span class="kc">True</span><span class="p">,</span><span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>table_name_with_schema</code></td>
        <td><code>str</code></td>
        <td><p>The table name, including the schema, e.g. 'public.customers'.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>fields_definition</code></td>
        <td><code>str</code></td>
        <td><p>String with the fields definitions. If any field name stars
with a number, or has a space, must be quoted, e.g. 
'gid serial primary key, natcode varchar,nameunit varchar,"{fieldName}" varchar'.format(
    fieldName='25_utm') </p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>delete_table_if_exists</code></td>
        <td><code>bool</code></td>
        <td><p>If True will delete the table before create it. If False,
if the table exists Psycopg2 will raise an error.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>print_query</code></td>
        <td><code>bool</code></td>
        <td><p>For debugging purposes. If true the delete and create table
sentences will be printed.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if the table has been created, or false if the table already existed,
    and was not deleted and created again, because the argument 
    <code>delete_table_if_exists</code> was False.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pgCreateTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">table_name_with_schema</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">fields_definition</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> 
    <span class="n">delete_table_if_exists</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">print_query</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a table. If the table already exists this method can delete it.</span>
<span class="sd">    Returns True if the table has been created, or false if the table</span>
<span class="sd">    already existed.</span>

<span class="sd">    See an example of use in </span>
<span class="sd">    &lt;a href=&quot;../tutorials/#delete-rows-and-files&quot;&gt;Delete rows and files&lt;/a&gt;.</span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt;r=pgo.pgCreateTable(table_name_with_schema=&quot;d.customers&quot;,</span>
<span class="sd">        &gt;&gt;&gt;    fields_definition=&quot;gid serial, name varchar, img varchar&quot;,</span>
<span class="sd">        &gt;&gt;&gt;    delete_table_if_exists= True,print_query=False)</span>

<span class="sd">    Args:</span>

<span class="sd">        table_name_with_schema: The table name, including the schema, e.g. &#39;public.customers&#39;.</span>
<span class="sd">        fields_definition: String with the fields definitions. If any field name stars</span>
<span class="sd">            with a number, or has a space, must be quoted, e.g. </span>
<span class="sd">            &#39;gid serial primary key, natcode varchar,nameunit varchar,&quot;{fieldName}&quot; varchar&#39;.format(</span>
<span class="sd">                fieldName=&#39;25_utm&#39;) </span>
<span class="sd">        delete_table_if_exists: If True will delete the table before create it. If False,</span>
<span class="sd">            if the table exists Psycopg2 will raise an error.</span>
<span class="sd">        print_query: For debugging purposes. If true the delete and create table</span>
<span class="sd">            sentences will be printed.</span>

<span class="sd">    Returns:</span>

<span class="sd">        True if the table has been created, or false if the table already existed,</span>
<span class="sd">            and was not deleted and created again, because the argument </span>
<span class="sd">            `delete_table_if_exists` was False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">schema</span><span class="o">=</span><span class="n">table_name_with_schema</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">tableName</span><span class="o">=</span><span class="n">table_name_with_schema</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgTableExists</span><span class="p">(</span><span class="n">table_name_with_schema</span><span class="o">=</span><span class="n">table_name_with_schema</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="n">print_query</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">delete_table_if_exists</span><span class="p">:</span>
            <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;drop table &quot;</span><span class="si">{schema}</span><span class="s1">&quot;.&quot;</span><span class="si">{tableName}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span><span class="n">tableName</span><span class="o">=</span><span class="n">tableName</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pgCreateTable&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Query to delete the table: &quot;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;create table &quot;</span><span class="si">{schema}</span><span class="s1">&quot;.&quot;</span><span class="si">{tableName}</span><span class="s1">&quot; (</span><span class="si">{fields_definition}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span><span class="n">tableName</span><span class="o">=</span><span class="n">tableName</span><span class="p">,</span><span class="n">fields_definition</span><span class="o">=</span><span class="n">fields_definition</span><span class="p">)</span>
    <span class="c1">#print(cons)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pgCreateTable&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Query to create the table: &quot;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgOperations.pgDelete" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pgDelete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">whereClause</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Delete rows from a table. Example of use:</p>
<p>See an example of use in<br />
<a href="../tutorials/#delete" target="_blank">Example of delete</a>.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>table_name</code></td>
        <td><code>str</code></td>
        <td><p>table name included the schema, e.g. <code>d.linde</code>. 
It is mandatory to specify the schema name: <code>public.tablename</code></p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>whereClause</code></td>
        <td><code>WhereClause</code></td>
        <td><p>Data of the where clause. If it is None, all the rows
will be deleted.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>print_query</code></td>
        <td><code>bool</code></td>
        <td><p>If True, will print the SQL query, form debugging purposes.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>int</code></td>
      <td><p>The number of deleted rows.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pgDelete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">whereClause</span><span class="p">:</span> <span class="n">WhereClause</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">print_query</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Delete rows from a table. Example of use:</span>

<span class="sd">    See an example of use in  </span>
<span class="sd">    &lt;a href=&quot;../tutorials/#delete&quot; target=&quot;_blank&quot;&gt;Example of delete&lt;/a&gt;.</span>

<span class="sd">    Args:</span>

<span class="sd">        table_name: table name included the schema, e.g. `d.linde`. </span>
<span class="sd">            It is mandatory to specify the schema name: `public.tablename`</span>
<span class="sd">        whereClause: Data of the where clause. If it is None, all the rows</span>
<span class="sd">            will be deleted.</span>
<span class="sd">        print_query: If True, will print the SQL query, form debugging purposes.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The number of deleted rows.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">conn</span>
    <span class="n">cursor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span>
    <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;delete from </span><span class="si">{table_name}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">table_name</span><span class="o">=</span><span class="n">table_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">whereClause</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cons</span> <span class="o">+=</span> <span class="s1">&#39; where &#39;</span> <span class="o">+</span> <span class="n">whereClause</span><span class="o">.</span><span class="n">where_clause</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">,</span> <span class="n">whereClause</span><span class="o">.</span><span class="n">where_values_list</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">=</span><span class="n">cons</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pgDelete&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Query: &#39;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">whereClause</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">whereClause</span><span class="o">.</span><span class="n">printProperties</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of rows deleted: &#39;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgOperations.pgDeleteFileInRow" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pgDeleteFileInRow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">field_name_with_file_name</span><span class="p">,</span> <span class="n">base_path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>If you have a row stored in a dictionary, this function
deletes a file in the file system. The the filename must be one of the values
of the dictionary. <strong>This method has been texted only in Linux systems</strong>.</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="n">d</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;gid&#39;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;customer&#39;</span><span class="p">,</span> <span class="s1">&#39;img&#39;</span><span class="p">:</span> <span class="s1">&#39;00012325.jpg&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span><span class="n">resp</span><span class="o">=</span><span class="n">pgo</span><span class="o">.</span><span class="n">deleteFileInRow</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">d</span><span class="p">,</span><span class="n">field_name_with_file_name</span><span class="o">=</span><span class="s1">&#39;img&#39;</span><span class="p">,</span>
    <span class="n">base_path</span><span class="o">=</span><span class="s1">&#39;/home/user/media/customers/img&#39;</span><span class="p">)</span>
</code></pre></div>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>row</code></td>
        <td><code>dict</code></td>
        <td><p>A Python dictionary with the filename to delete, 
e.g. {'gid': 25, 'description': 'customer', 'img': '00012325.jpg'}</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>field_name_with_file_name</code></td>
        <td><code>str</code></td>
        <td><p>field in the table which contains the file name. </p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>base_path</code></td>
        <td><code>str</code></td>
        <td><p>If the <code>field_name_with_file_name</code> field contains relative paths,
    or only the file name, you can specify in this parameter the
    base path to complete the absolute path to the file. Does not
    matters if the base_path ends in the character <code>/</code> or not, 
    e.g. <code>/home/user/media/images/</code>, or  <code>/home/user/media/images</code>.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>      <p>Returns: 
    True if the file could be deleted. Otherwise False.</p>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pgDeleteFileInRow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">row</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">field_name_with_file_name</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">base_path</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    If you have a row stored in a dictionary, this function</span>
<span class="sd">    deletes a file in the file system. The the filename must be one of the values</span>
<span class="sd">    of the dictionary. **This method has been texted only in Linux systems**.</span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt;d={&#39;gid&#39;: 25, &#39;description&#39;: &#39;customer&#39;, &#39;img&#39;: &#39;00012325.jpg&#39;}</span>
<span class="sd">        &gt;&gt;&gt;resp=pgo.deleteFileInRow(row=d,field_name_with_file_name=&#39;img&#39;,</span>
<span class="sd">            base_path=&#39;/home/user/media/customers/img&#39;)</span>

<span class="sd">    Args:</span>

<span class="sd">        row: A Python dictionary with the filename to delete, </span>
<span class="sd">            e.g. {&#39;gid&#39;: 25, &#39;description&#39;: &#39;customer&#39;, &#39;img&#39;: &#39;00012325.jpg&#39;}</span>
<span class="sd">        field_name_with_file_name: field in the table which contains the file name. </span>
<span class="sd">        base_path: If the `field_name_with_file_name` field contains relative paths,</span>
<span class="sd">                or only the file name, you can specify in this parameter the</span>
<span class="sd">                base path to complete the absolute path to the file. Does not</span>
<span class="sd">                matters if the base_path ends in the character `/` or not, </span>
<span class="sd">                e.g. `/home/user/media/images/`, or  `/home/user/media/images`.</span>

<span class="sd">    Returns: </span>
<span class="sd">        True if the file could be deleted. Otherwise False.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">base_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1">#print(base_path[len(base_path)-1])</span>
        <span class="k">if</span> <span class="n">base_path</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">base_path</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span> <span class="s1">&#39;/&#39;</span><span class="p">:</span>
            <span class="n">base_path</span> <span class="o">=</span> <span class="n">base_path</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">base_path</span> <span class="o">=</span> <span class="n">base_path</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span>

    <span class="n">imageName</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="n">field_name_with_file_name</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">base_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">imageName</span> <span class="o">=</span> <span class="n">base_path</span> <span class="o">+</span> <span class="n">imageName</span> 

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">imageName</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">imageName</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgOperations.pgDeleteWithFiles" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pgDeleteWithFiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">field_name_with_file_name</span><span class="p">,</span> <span class="n">whereClause</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">base_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p><strong>This method only has been tested in Linux systems</strong></p>
<p>Deletes the selected rows, and their associated files in the hard disk.
The rows have to have a field with the file names to delete. The file names
can contain an absolute path, or a relative path. It is possible to complete
relative paths with the parameter <code>base_path</code>.</p>
<p>Before the rows be deleted, the files are deleted.</p>
<p>See an example of use in 
<a href="../tutorials/#delete-rows-and-files" target="_blank">Delete rows and files</a>.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>table_name</code></td>
        <td><code>str</code></td>
        <td><p>Table name with schema, e.g. <code>public.customers</code>. </p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>field_name_with_file_name</code></td>
        <td><code>str</code></td>
        <td><p>field in the table which contains the file name, e.g. <code>img</code>.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>whereClause</code></td>
        <td><code>WhereClause</code></td>
        <td><p>Data of the where clause. If it is None, all the rows and files
            will be deleted.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>base_path</code></td>
        <td><code>str</code></td>
        <td><p>Base path to prepose to the file names. Can end with or without <code>/</code>, e.g. 
<code>/home/user/app/media/customers/img</code>.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>print_query</code></td>
        <td><code>bool</code></td>
        <td><p>for debugging purposes. If true will print the SQL sentences and values.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dictionary with the following information</code></td>
      <td><p>number of rows deleted, list of file names deleted, 
    list of filenames not deleted, the base path, e.g. 
    {'numOfRowsDeleted': 3, 'deletedFileNames': [], 
    'notDeletedFilenames': ['image1.jpg', 'image2.jpg', 'image3.jpg'], 
    'base_path': '/home/joamona/temp/img'}</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pgDeleteWithFiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">field_name_with_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">whereClause</span><span class="p">:</span> <span class="n">WhereClause</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">base_path</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
        <span class="n">print_query</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    **This method only has been tested in Linux systems**</span>

<span class="sd">    Deletes the selected rows, and their associated files in the hard disk.</span>
<span class="sd">    The rows have to have a field with the file names to delete. The file names</span>
<span class="sd">    can contain an absolute path, or a relative path. It is possible to complete</span>
<span class="sd">    relative paths with the parameter `base_path`.</span>

<span class="sd">    Before the rows be deleted, the files are deleted.</span>

<span class="sd">    See an example of use in </span>
<span class="sd">    &lt;a href=&quot;../tutorials/#delete-rows-and-files&quot; target=&quot;_blank&quot;&gt;Delete rows and files&lt;/a&gt;.</span>

<span class="sd">    Args:</span>

<span class="sd">        table_name: Table name with schema, e.g. `public.customers`. </span>
<span class="sd">        field_name_with_file_name: field in the table which contains the file name, e.g. `img`.</span>
<span class="sd">        whereClause: Data of the where clause. If it is None, all the rows and files</span>
<span class="sd">                        will be deleted.</span>
<span class="sd">        base_path: Base path to prepose to the file names. Can end with or without `/`, e.g. </span>
<span class="sd">            `/home/user/app/media/customers/img`.</span>
<span class="sd">        print_query: for debugging purposes. If true will print the SQL sentences and values.</span>

<span class="sd">    Returns:</span>

<span class="sd">        Dictionary with the following information: </span>
<span class="sd">            number of rows deleted, list of file names deleted, </span>
<span class="sd">            list of filenames not deleted, the base path, e.g. </span>
<span class="sd">            {&#39;numOfRowsDeleted&#39;: 3, &#39;deletedFileNames&#39;: [], </span>
<span class="sd">            &#39;notDeletedFilenames&#39;: [&#39;image1.jpg&#39;, &#39;image2.jpg&#39;, &#39;image3.jpg&#39;], </span>
<span class="sd">            &#39;base_path&#39;: &#39;/home/joamona/temp/img&#39;}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgSelect</span><span class="p">(</span><span class="n">table_name</span><span class="o">=</span><span class="n">table_name</span><span class="p">,</span> 
        <span class="n">string_fields_to_select</span><span class="o">=</span><span class="n">field_name_with_file_name</span><span class="p">,</span> 
        <span class="n">whereClause</span><span class="o">=</span> <span class="n">whereClause</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="n">print_query</span><span class="p">)</span>
    <span class="n">deletedFileNames</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">notExistingFilenames</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">r</span><span class="p">:</span>
        <span class="n">deleted</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgDeleteFileInRow</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">field_name_with_file_name</span><span class="p">,</span><span class="n">base_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">deleted</span><span class="p">:</span>
            <span class="n">deletedFileNames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">field_name_with_file_name</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">notExistingFilenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">field_name_with_file_name</span><span class="p">])</span>

    <span class="n">n</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgDelete</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">whereClause</span><span class="o">=</span><span class="n">whereClause</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;numOfRowsDeleted&#39;</span><span class="p">:</span> <span class="n">n</span><span class="p">,</span> <span class="s1">&#39;deletedFileNames&#39;</span><span class="p">:</span> <span class="n">deletedFileNames</span><span class="p">,</span> 
        <span class="s1">&#39;notDeletedFilenames&#39;</span><span class="p">:</span> <span class="n">notExistingFilenames</span><span class="p">,</span> <span class="s1">&#39;base_path&#39;</span><span class="p">:</span> <span class="n">base_path</span><span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgOperations.pgGetTableFieldNames" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pgGetTableFieldNames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">selectGeometryFieldOptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">list_fields_to_remove</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">returnAsString</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Returns the field names of a table. Depending of the <code>returnAsString</code> parameter
returns a string or a list.
The geometry field name can be returned with one of the following formats:
'geom', 'st_astext(geom)', 'st_asgeojson(geom)', 'st_transform(st_asgeojson(geom),EPSG),
or 'st_transform(st_astext(geom),EPSG). The objetive with this is the output of
this function serves to input for the parameter <code>list_fields_to_select</code>
of the method pgSelect.</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="n">gf</span><span class="o">=</span><span class="n">pg</span><span class="o">.</span><span class="n">SelectGeometryFormat</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span><span class="n">gfo</span><span class="o">=</span><span class="n">pg</span><span class="o">.</span><span class="n">SelectGeometryFieldOptions</span><span class="p">(</span><span class="n">geom_field_name</span><span class="o">=</span><span class="s1">&#39;geom&#39;</span><span class="p">,</span>
    <span class="n">select_geometry_format</span><span class="o">=</span><span class="n">gf</span><span class="o">.</span><span class="n">geojson</span><span class="p">,</span> <span class="n">epsg_to_reproject</span><span class="o">=</span><span class="s1">&#39;25831&#39;</span><span class="p">)</span><span class="c1">#</span>
<span class="o">&gt;&gt;&gt;</span><span class="n">fieldNames</span><span class="o">=</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgGetTableFieldNames</span><span class="p">(</span><span class="s1">&#39;d.points&#39;</span><span class="p">,</span><span class="n">gfo</span><span class="p">,</span><span class="n">list_fields_to_remove</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">],</span>
    <span class="n">returnAsString</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="n">wc</span><span class="o">=</span><span class="n">pg</span><span class="o">.</span><span class="n">WhereClause</span><span class="p">(</span><span class="n">where_clause</span><span class="o">=</span><span class="s1">&#39;gid=</span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">where_values_list</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span><span class="n">res</span><span class="o">=</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgSelect</span><span class="p">(</span><span class="n">table_name</span><span class="o">=</span><span class="s1">&#39;d.points&#39;</span><span class="p">,</span> <span class="n">string_fields_to_select</span><span class="o">=</span><span class="n">fieldNames</span><span class="p">,</span><span class="n">whereClause</span><span class="o">=</span><span class="n">wc</span><span class="p">)</span>
</code></pre></div>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>table_name</code></td>
        <td><code>str</code></td>
        <td></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>selectGeometryFieldOptions</code></td>
        <td><code>SelectGeometryFieldOptions</code></td>
        <td></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>list_fields_to_remove</code></td>
        <td><code>list</code></td>
        <td></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>returnAsString</code></td>
        <td></td>
        <td></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>print_query</code></td>
        <td><code>bool</code></td>
        <td></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>      <p>Returns: 
    If <code>returnAsString</code> is False, a list of the field names the table, 
    If <code>returnAsString</code> is False, a string with field names of the a table </p>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pgGetTableFieldNames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
        <span class="n">selectGeometryFieldOptions</span><span class="p">:</span> <span class="n">SelectGeometryFieldOptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">list_fields_to_remove</span><span class="p">:</span> <span class="nb">list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
        <span class="n">returnAsString</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">print_query</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the field names of a table. Depending of the `returnAsString` parameter</span>
<span class="sd">    returns a string or a list.</span>
<span class="sd">    The geometry field name can be returned with one of the following formats:</span>
<span class="sd">    &#39;geom&#39;, &#39;st_astext(geom)&#39;, &#39;st_asgeojson(geom)&#39;, &#39;st_transform(st_asgeojson(geom),EPSG),</span>
<span class="sd">    or &#39;st_transform(st_astext(geom),EPSG). The objetive with this is the output of</span>
<span class="sd">    this function serves to input for the parameter `list_fields_to_select`</span>
<span class="sd">    of the method pgSelect.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt;gf=pg.SelectGeometryFormat()</span>
<span class="sd">        &gt;&gt;&gt;gfo=pg.SelectGeometryFieldOptions(geom_field_name=&#39;geom&#39;,</span>
<span class="sd">            select_geometry_format=gf.geojson, epsg_to_reproject=&#39;25831&#39;)#</span>
<span class="sd">        &gt;&gt;&gt;fieldNames=pgo.pgGetTableFieldNames(&#39;d.points&#39;,gfo,list_fields_to_remove=[&#39;description&#39;],</span>
<span class="sd">            returnAsString=True)</span>
<span class="sd">        &gt;&gt;&gt;wc=pg.WhereClause(where_clause=&#39;gid=%s&#39;,where_values_list=[3])</span>
<span class="sd">        &gt;&gt;&gt;res=pgo.pgSelect(table_name=&#39;d.points&#39;, string_fields_to_select=fieldNames,whereClause=wc)</span>

<span class="sd">    Args:</span>
<span class="sd">        table_name: </span>
<span class="sd">        selectGeometryFieldOptions: </span>
<span class="sd">        list_fields_to_remove: </span>
<span class="sd">        returnAsString: </span>
<span class="sd">        print_query: </span>

<span class="sd">    Returns: </span>
<span class="sd">        If `returnAsString` is False, a list of the field names the table, </span>
<span class="sd">        If `returnAsString` is False, a string with field names of the a table </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">consulta</span><span class="o">=</span><span class="s2">&quot;SELECT column_name FROM information_schema.columns WHERE table_schema=</span><span class="si">%s</span><span class="s2"> and table_name = </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="n">lis</span><span class="o">=</span><span class="n">table_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>

    <span class="n">cursor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">consulta</span><span class="p">,</span><span class="n">lis</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="n">listaValores</span><span class="o">=</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span><span class="c1">#es una lista de tuplas.</span>
            <span class="c1">#cada tupla es una fila. En este caso, la fila tiene un</span>
            <span class="c1">#unico elemento, que es el nombre del campo.</span>

    <span class="k">if</span> <span class="n">selectGeometryFieldOptions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">geom_field_name</span><span class="p">,)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">listaValores</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;pgGetTableFieldNames. The geometry field name </span><span class="si">{0}</span><span class="s2"> is not a field of the table </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">geom_field_name</span><span class="p">,</span> <span class="n">table_name</span><span class="p">))</span>

    <span class="n">listaNombreCampos</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">fila2</span> <span class="ow">in</span> <span class="n">listaValores</span><span class="p">:</span>
        <span class="n">valor</span><span class="o">=</span><span class="n">fila2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">list_fields_to_remove</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">valor</span> <span class="ow">in</span> <span class="n">list_fields_to_remove</span><span class="p">:</span>
                <span class="k">continue</span>
        <span class="k">if</span> <span class="n">selectGeometryFieldOptions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">valor</span><span class="o">==</span><span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">geom_field_name</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">epsg_to_reproject</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s1">&#39;binary&#39;</span> <span class="o">==</span> <span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">select_geometry_format</span><span class="p">:</span>
                        <span class="n">valor</span><span class="o">=</span><span class="s1">&#39;st_transform(</span><span class="si">{geom_field_name}</span><span class="s1">,</span><span class="si">{epsg_to_reproject}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                            <span class="n">geom_field_name</span> <span class="o">=</span> <span class="n">valor</span><span class="p">,</span> 
                            <span class="n">epsg_to_reproject</span><span class="o">=</span><span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">epsg_to_reproject</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="s1">&#39;text&#39;</span> <span class="o">==</span> <span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">select_geometry_format</span><span class="p">:</span>
                        <span class="n">valor</span><span class="o">=</span><span class="s1">&#39;st_astext(st_transform(</span><span class="si">{geom_field_name}</span><span class="s1">,</span><span class="si">{epsg_to_reproject}</span><span class="s1">))&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                            <span class="n">geom_field_name</span> <span class="o">=</span> <span class="n">valor</span><span class="p">,</span> 
                            <span class="n">epsg_to_reproject</span><span class="o">=</span><span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">epsg_to_reproject</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="s1">&#39;geojson&#39;</span> <span class="o">==</span> <span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">select_geometry_format</span><span class="p">:</span>
                        <span class="n">valor</span><span class="o">=</span><span class="s1">&#39;st_asgeojson(st_transform(</span><span class="si">{geom_field_name}</span><span class="s1">,</span><span class="si">{epsg_to_reproject}</span><span class="s1">))&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">geom_field_name</span> <span class="o">=</span> <span class="n">valor</span><span class="p">,</span> 
                        <span class="n">epsg_to_reproject</span><span class="o">=</span><span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">epsg_to_reproject</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s1">&#39;binary&#39;</span> <span class="o">==</span> <span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">select_geometry_format</span><span class="p">:</span>
                            <span class="n">valor</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">{geometry_field_name}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">geom_field_name</span> <span class="o">=</span> <span class="n">valor</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="s1">&#39;text&#39;</span> <span class="o">==</span> <span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">select_geometry_format</span><span class="p">:</span>
                        <span class="n">valor</span><span class="o">=</span><span class="s1">&#39;st_astext(</span><span class="si">{geom_field_name}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">geom_field_name</span> <span class="o">=</span> <span class="n">valor</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="s1">&#39;geojson&#39;</span> <span class="o">==</span> <span class="n">selectGeometryFieldOptions</span><span class="o">.</span><span class="n">select_geometry_format</span><span class="p">:</span>
                        <span class="n">valor</span><span class="o">=</span><span class="s1">&#39;st_asgeojson(</span><span class="si">{geom_field_name}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">geom_field_name</span> <span class="o">=</span> <span class="n">valor</span><span class="p">)</span>
        <span class="n">listaNombreCampos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">valor</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">=</span><span class="n">consulta</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pgGetTableFieldNames&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Query: &#39;</span><span class="p">,</span> <span class="n">consulta</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fields list:&#39;</span><span class="p">,</span> <span class="n">listaNombreCampos</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">returnAsString</span><span class="p">:</span>
        <span class="n">s</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">campo</span> <span class="ow">in</span> <span class="n">listaNombreCampos</span><span class="p">:</span>
            <span class="n">s</span><span class="o">=</span><span class="n">s</span> <span class="o">+</span> <span class="n">campo</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span>
        <span class="k">return</span> <span class="n">s</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">listaNombreCampos</span>   
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgOperations.pgInsert" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pgInsert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">fieldsAndValues</span><span class="p">,</span> <span class="n">str_fields_returning</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Inserts a row in a table.</p>
<p>See examples of use in  <a href="../tutorials/#insert" target="_blank">Examples of insert</a>.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>table_name</code></td>
        <td><code>str</code></td>
        <td><p>Table name to insert the row.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>fieldsAndValues</code></td>
        <td><code>Union[src.pgOperations.pgOperations.FieldsAndValuesBase, src.pgOperations.pgOperations.FieldsAndValues]</code></td>
        <td><p>Object containing SQL expression pars of the SQL, and the
list of values.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>str_fields_returning</code></td>
        <td><code>str</code></td>
        <td><p>A string with the field values, comma separated, of the
inserted row to be returned, e.g. ´'gid,date'´. The values are put in a 
dictionary, and the dictionary is put in a list, e.g. <code>[{'gid': 25, 'date': '2022-11-13'}]</code>.
If this parameter is not set None is returned.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>print_query</code></td>
        <td><code>bool</code></td>
        <td><p>If <code>True</code> the SQL sentence is printed in the screen. This option
may be is interesting for debugging.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>An empty list `[]` or a list with a dictionary, e.g. `[{&#39;gid&#39;</code></td>
      <td><p>25, 'date': '2022-11-13'}]`, depending of the value of the parameter ´str_fields_returning´.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pgInsert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
        <span class="n">fieldsAndValues</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">FieldsAndValuesBase</span><span class="p">,</span><span class="n">FieldsAndValues</span><span class="p">],</span> 
        <span class="n">str_fields_returning</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">print_query</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">list</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Inserts a row in a table.</span>

<span class="sd">    See examples of use in  &lt;a href=&quot;../tutorials/#insert&quot; target=&quot;_blank&quot;&gt;Examples of insert&lt;/a&gt;.</span>

<span class="sd">    Args:</span>
<span class="sd">        table_name: Table name to insert the row.</span>
<span class="sd">        fieldsAndValues: Object containing SQL expression pars of the SQL, and the</span>
<span class="sd">            list of values.</span>
<span class="sd">        str_fields_returning: A string with the field values, comma separated, of the</span>
<span class="sd">            inserted row to be returned, e.g. ´&#39;gid,date&#39;´. The values are put in a </span>
<span class="sd">            dictionary, and the dictionary is put in a list, e.g. `[{&#39;gid&#39;: 25, &#39;date&#39;: &#39;2022-11-13&#39;}]`.</span>
<span class="sd">            If this parameter is not set None is returned.</span>
<span class="sd">        print_query: If `True` the SQL sentence is printed in the screen. This option</span>
<span class="sd">            may be is interesting for debugging.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An empty list `[]` or a list with a dictionary, e.g. `[{&#39;gid&#39;: 25, &#39;date&#39;: &#39;2022-11-13&#39;}]`, depending of the value of the parameter ´str_fields_returning´.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">conn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">conn</span>
    <span class="n">cursor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span>

    <span class="n">str_field_names</span><span class="o">=</span><span class="n">fieldsAndValues</span><span class="o">.</span><span class="n">str_field_names</span>
    <span class="n">list_field_values</span><span class="o">=</span><span class="n">fieldsAndValues</span><span class="o">.</span><span class="n">list_field_values</span>
    <span class="n">str_s_values</span><span class="o">=</span><span class="n">fieldsAndValues</span><span class="o">.</span><span class="n">str_s_values</span>

    <span class="c1">#cons_ins=&#39;insert into {0} ({1}) values (%s,st_geometryfromtext(%s,25830))&#39;.format(table_name, string_fields_to_set)</span>
    <span class="n">cons_ins</span><span class="o">=</span><span class="s1">&#39;insert into </span><span class="si">{0}</span><span class="s1"> (</span><span class="si">{1}</span><span class="s1">) values (</span><span class="si">{2}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">str_field_names</span><span class="p">,</span> <span class="n">str_s_values</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">str_fields_returning</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cons_ins</span> <span class="o">=</span><span class="n">cons_ins</span> <span class="o">+</span> <span class="s1">&#39; returning &#39;</span> <span class="o">+</span> <span class="n">str_fields_returning</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pgInsert&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Query: &#39;</span><span class="p">,</span> <span class="n">cons_ins</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Values: &#39;</span><span class="p">,</span> <span class="n">list_field_values</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">=</span><span class="n">cons_ins</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons_ins</span><span class="p">,</span><span class="n">list_field_values</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoCommit</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">str_fields_returning</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">returning</span><span class="o">=</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="n">fieldNames</span><span class="o">=</span><span class="n">str_fields_returning</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
        <span class="n">d</span><span class="o">=</span><span class="p">{}</span>
        <span class="n">i</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fieldNames</span><span class="p">:</span>
            <span class="n">d</span><span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span><span class="o">=</span><span class="n">returning</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
            <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">d</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgOperations.pgSelect" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pgSelect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">string_fields_to_select</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">whereClause</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">get_rows_as_dicts</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">orderBy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">groupBy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Select rows of a table.</p>
<p>See examples of use in  <a href="../tutorials/#select" target="_blank">Examples of select</a>.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>table_name</code></td>
        <td><code>str</code></td>
        <td><p>table name included the schema, e.g. "d.linde". 
Mandatory specify the schema name, even if the table is
in the schema <code>public</code>: "public.tablename".</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>string_fields_to_select</code></td>
        <td><code>str</code></td>
        <td><p>string with the fields to select, comma separated, 
e.g. 'gid, description, area, st_asgeojson(geom)'. You can use '*' 
to select all table fields.</p></td>
        <td><code>&#39;*&#39;</code></td>
      </tr>
      <tr>
        <td><code>whereClause</code></td>
        <td><code>WhereClause</code></td>
        <td><p>Data of the where clause. If it is none all the rows will be selected.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>get_rows_as_dicts</code></td>
        <td><code>bool</code></td>
        <td><p>If True the function will return a list of dictionaries,
each dictionary representing a selected row. If False the function
will return a list of tuples. Each list element represents a selected row.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>limit</code></td>
        <td><code>int</code></td>
        <td><p>The maximum rows to return.</p></td>
        <td><code>100</code></td>
      </tr>
      <tr>
        <td><code>orderBy</code></td>
        <td><code>str</code></td>
        <td><p>Order by SQL clause, e.g. "depth desc". Will order the results
by the field depth descending. <strong>The words <code>order by</code> must not be specified</strong>.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>groupBy</code></td>
        <td><code>str</code></td>
        <td><p>Group by SQL clause, e.g. "depth". Will group the results
by the field depth. <strong>The words <code>group by</code> must not be specified</strong>.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>print_query</code></td>
        <td><code>bool</code></td>
        <td><p>print_query: If <code>True</code> the SQL sentence is printed in the screen. This option
may be is interesting for debugging.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>An empty list, if there is not any row selected.
A list of dictionaries, each dictionary 
    representing a selected row, if <code>get_rows_as_dicts</code> is True. 
A list of lists, each list 
    representing a selected row, if <code>get_rows_as_dicts</code> is True.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pgSelect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">string_fields_to_select</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> 
            <span class="n">whereClause</span><span class="p">:</span> <span class="n">WhereClause</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
            <span class="n">get_rows_as_dicts</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">orderBy</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">groupBy</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
            <span class="n">print_query</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">list</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Select rows of a table.</span>

<span class="sd">    See examples of use in  &lt;a href=&quot;../tutorials/#select&quot; target=&quot;_blank&quot;&gt;Examples of select&lt;/a&gt;.</span>

<span class="sd">    Args:</span>
<span class="sd">        table_name: table name included the schema, e.g. &quot;d.linde&quot;. </span>
<span class="sd">            Mandatory specify the schema name, even if the table is</span>
<span class="sd">            in the schema `public`: &quot;public.tablename&quot;.</span>
<span class="sd">        string_fields_to_select: string with the fields to select, comma separated, </span>
<span class="sd">            e.g. &#39;gid, description, area, st_asgeojson(geom)&#39;. You can use &#39;*&#39; </span>
<span class="sd">            to select all table fields.</span>
<span class="sd">        whereClause: Data of the where clause. If it is none all the rows will be selected.</span>
<span class="sd">        get_rows_as_dicts: If True the function will return a list of dictionaries,</span>
<span class="sd">            each dictionary representing a selected row. If False the function</span>
<span class="sd">            will return a list of tuples. Each list element represents a selected row.</span>
<span class="sd">        limit: The maximum rows to return.</span>
<span class="sd">        orderBy: Order by SQL clause, e.g. &quot;depth desc&quot;. Will order the results</span>
<span class="sd">            by the field depth descending. **The words `order by` must not be specified**.</span>
<span class="sd">        groupBy: Group by SQL clause, e.g. &quot;depth&quot;. Will group the results</span>
<span class="sd">            by the field depth. **The words `group by` must not be specified**.</span>
<span class="sd">        print_query: print_query: If `True` the SQL sentence is printed in the screen. This option</span>
<span class="sd">            may be is interesting for debugging.</span>

<span class="sd">    Returns:</span>

<span class="sd">        An empty list, if there is not any row selected.</span>
<span class="sd">        A list of dictionaries, each dictionary </span>
<span class="sd">            representing a selected row, if `get_rows_as_dicts` is True. </span>
<span class="sd">        A list of lists, each list </span>
<span class="sd">            representing a selected row, if `get_rows_as_dicts` is True.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cursor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span>

    <span class="k">if</span> <span class="n">orderBy</span><span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">orderBy</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">orderBy</span> <span class="o">=</span> <span class="s2">&quot;order by &quot;</span> <span class="o">+</span> <span class="n">orderBy</span>

    <span class="k">if</span> <span class="n">groupBy</span><span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">groupBy</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">groupBy</span> <span class="o">=</span> <span class="s2">&quot;group by &quot;</span> <span class="o">+</span> <span class="n">groupBy</span>

    <span class="c1">#executes the string. The list_val_cond_where has the values of the %s in the select string by order</span>
    <span class="k">if</span> <span class="n">whereClause</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">get_rows_as_dicts</span><span class="p">:</span>
            <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;SELECT array_to_json(array_agg(registros)) FROM (select </span><span class="si">{string_fields_to_select}</span><span class="s1"> from </span><span class="si">{table_name}</span><span class="s1"> </span><span class="si">{groupBy}</span><span class="s1"> </span><span class="si">{orderBy}</span><span class="s1"> limit </span><span class="si">{limit}</span><span class="s1">) as registros&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">string_fields_to_select</span><span class="o">=</span><span class="n">string_fields_to_select</span><span class="p">,</span>
                <span class="n">table_name</span><span class="o">=</span><span class="n">table_name</span><span class="p">,</span><span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">orderBy</span><span class="o">=</span><span class="n">orderBy</span><span class="p">,</span> <span class="n">groupBy</span><span class="o">=</span><span class="n">groupBy</span><span class="p">)</span>          
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cons</span> <span class="o">=</span> <span class="s1">&#39;select </span><span class="si">{string_fields_to_select}</span><span class="s1"> from </span><span class="si">{table_name}</span><span class="s1"> </span><span class="si">{groupBy}</span><span class="s1"> </span><span class="si">{orderBy}</span><span class="s1"> limit </span><span class="si">{limit}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">string_fields_to_select</span><span class="o">=</span><span class="n">string_fields_to_select</span><span class="p">,</span>
                <span class="n">table_name</span><span class="o">=</span><span class="n">table_name</span><span class="p">,</span><span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">orderBy</span><span class="o">=</span><span class="n">orderBy</span><span class="p">,</span> <span class="n">groupBy</span><span class="o">=</span><span class="n">groupBy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">=</span><span class="n">cons</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">get_rows_as_dicts</span><span class="p">:</span>
            <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;SELECT array_to_json(array_agg(registros)) FROM (select </span><span class="si">{string_fields_to_select}</span><span class="s1"> from </span><span class="si">{table_name}</span><span class="s1"> </span><span class="si">{cond_where}</span><span class="s1"> </span><span class="si">{groupBy}</span><span class="s1"> </span><span class="si">{orderBy}</span><span class="s1"> limit </span><span class="si">{limit}</span><span class="s1">) as registros&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">string_fields_to_select</span><span class="o">=</span><span class="n">string_fields_to_select</span><span class="p">,</span><span class="n">table_name</span><span class="o">=</span><span class="n">table_name</span><span class="p">,</span>
                <span class="n">cond_where</span><span class="o">=</span> <span class="s2">&quot; where &quot;</span> <span class="o">+</span> <span class="n">whereClause</span><span class="o">.</span><span class="n">where_clause</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> 
                <span class="n">orderBy</span><span class="o">=</span><span class="n">orderBy</span><span class="p">,</span> <span class="n">groupBy</span><span class="o">=</span><span class="n">groupBy</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;select </span><span class="si">{string_fields_to_select}</span><span class="s1"> from </span><span class="si">{table_name}</span><span class="s1"> </span><span class="si">{cond_where}</span><span class="s1"> </span><span class="si">{groupBy}</span><span class="s1"> </span><span class="si">{orderBy}</span><span class="s1"> limit </span><span class="si">{limit}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">string_fields_to_select</span><span class="o">=</span><span class="n">string_fields_to_select</span><span class="p">,</span><span class="n">table_name</span><span class="o">=</span><span class="n">table_name</span><span class="p">,</span>
                <span class="n">cond_where</span><span class="o">=</span> <span class="s2">&quot; where &quot;</span> <span class="o">+</span> <span class="n">whereClause</span><span class="o">.</span><span class="n">where_clause</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> 
                <span class="n">orderBy</span><span class="o">=</span><span class="n">orderBy</span><span class="p">,</span> <span class="n">groupBy</span><span class="o">=</span><span class="n">groupBy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">=</span><span class="n">cons</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">,</span> <span class="n">whereClause</span><span class="o">.</span><span class="n">where_values_list</span><span class="p">)</span>

    <span class="c1">#gets all rows </span>
    <span class="n">lista</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">get_rows_as_dicts</span><span class="p">:</span>
        <span class="n">r</span><span class="o">=</span><span class="n">lista</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">r</span><span class="o">=</span><span class="n">lista</span>
    <span class="k">if</span> <span class="n">r</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#there wheren&#39;t selected rows</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1">#in ubuntu 14.04 r is a string, in 16.04 is a list</span>
        <span class="c1">#if it is a string is converted to list</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">r</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pgSelect&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Query: &quot;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">whereClause</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">whereClause</span><span class="o">.</span><span class="n">printProperties</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Num of selected rows: &quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">r</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgOperations.pgTableExists" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pgTableExists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name_with_schema</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Returns True or False, depending on if the table exists in the database or not.
table_name_with_schema: table name included the schema, e.g. "d.boundary".</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>table_name_with_schema</code></td>
        <td><code>str</code></td>
        <td><p>The table name, e.g. "d.boundary"</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>print_query</code></td>
        <td><code>bool</code></td>
        <td><p>For debugging purposes. If true will print the queries. </p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="n">res</span><span class="o">=</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgTableExists</span><span class="p">(</span><span class="n">table_name_with_schema</span><span class="o">=</span><span class="s1">&#39;d.points&#39;</span><span class="p">)</span>
</code></pre></div>
      <p>Returns: 
    True or False, depending on if the table exists in the database or not.</p>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pgTableExists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name_with_schema</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">print_query</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns True or False, depending on if the table exists in the database or not.</span>
<span class="sd">    table_name_with_schema: table name included the schema, e.g. &quot;d.boundary&quot;.</span>

<span class="sd">    Args:</span>

<span class="sd">        table_name_with_schema: The table name, e.g. &quot;d.boundary&quot;</span>
<span class="sd">        print_query: For debugging purposes. If true will print the queries. </span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt;res=pgo.pgTableExists(table_name_with_schema=&#39;d.points&#39;)</span>

<span class="sd">    Returns: </span>
<span class="sd">        True or False, depending on if the table exists in the database or not.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">l</span><span class="o">=</span><span class="n">table_name_with_schema</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
    <span class="n">table_schema</span><span class="o">=</span><span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">table_name</span><span class="o">=</span><span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">cons</span><span class="o">=</span><span class="s2">&quot;SELECT EXISTS (SELECT 1 FROM   information_schema.tables WHERE  table_schema = </span><span class="si">%s</span><span class="s2"> AND    table_name = </span><span class="si">%s</span><span class="s2">)&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">,[</span><span class="n">table_schema</span><span class="p">,</span> <span class="n">table_name</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pgTableExists&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Query:&#39;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
    <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgOperations.pgUpdate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pgUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">fieldsAndValues</span><span class="p">,</span> <span class="n">whereClause</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Updates a table</p>
<p>See examples of use in  <a href="../tutorials/#update" target="_blank">Examples of update</a>.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>table_name</code></td>
        <td><code>str</code></td>
        <td><p>table name included the schema. Ej. "d.linde". 
Mandatory specify the schema name, even if the table
is in the schema <code>public</code>: "public.tablename".</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>fieldsAndValues</code></td>
        <td><code>FieldsAndValues</code></td>
        <td><p>Object containing SQL expression pars of the SQL, and the
list of values.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>whereClause</code></td>
        <td><code>WhereClause</code></td>
        <td><p>Data of the where clause. If it is none all the rows will be updated.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>print_query</code></td>
        <td><code>bool</code></td>
        <td><p>print_query: If <code>True</code> the SQL sentence is printed in the screen. This option
may be is interesting for debugging.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>int</code></td>
      <td><p>The number of updated rows.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pgUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">fieldsAndValues</span><span class="p">:</span> <span class="n">FieldsAndValues</span><span class="p">,</span> 
            <span class="n">whereClause</span><span class="p">:</span> <span class="n">WhereClause</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
            <span class="n">print_query</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates a table</span>

<span class="sd">    See examples of use in  &lt;a href=&quot;../tutorials/#update&quot; target=&quot;_blank&quot;&gt;Examples of update&lt;/a&gt;.</span>

<span class="sd">    Args:</span>

<span class="sd">        table_name: table name included the schema. Ej. &quot;d.linde&quot;. </span>
<span class="sd">            Mandatory specify the schema name, even if the table</span>
<span class="sd">            is in the schema `public`: &quot;public.tablename&quot;.</span>
<span class="sd">        fieldsAndValues: Object containing SQL expression pars of the SQL, and the</span>
<span class="sd">            list of values.</span>
<span class="sd">        whereClause: Data of the where clause. If it is none all the rows will be updated.</span>
<span class="sd">        print_query: print_query: If `True` the SQL sentence is printed in the screen. This option</span>
<span class="sd">            may be is interesting for debugging.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The number of updated rows.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">conn</span>
    <span class="n">cursor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span>

    <span class="n">str_field_names</span><span class="o">=</span><span class="n">fieldsAndValues</span><span class="o">.</span><span class="n">str_field_names</span>
    <span class="n">list_field_values</span><span class="o">=</span><span class="n">fieldsAndValues</span><span class="o">.</span><span class="n">list_field_values</span>
    <span class="n">str_s_values</span><span class="o">=</span><span class="n">fieldsAndValues</span><span class="o">.</span><span class="n">str_s_values</span>

    <span class="n">cons</span><span class="o">=</span><span class="s1">&#39;update </span><span class="si">{table_name}</span><span class="s1"> set (</span><span class="si">{str_field_names}</span><span class="s1">) = row(</span><span class="si">{str_s_values}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">table_name</span><span class="o">=</span><span class="n">table_name</span><span class="p">,</span><span class="n">str_field_names</span><span class="o">=</span><span class="n">str_field_names</span><span class="p">,</span><span class="n">str_s_values</span><span class="o">=</span><span class="n">str_s_values</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">whereClause</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cons</span> <span class="o">+=</span> <span class="s1">&#39; where &#39;</span> <span class="o">+</span> <span class="n">whereClause</span><span class="o">.</span><span class="n">where_clause</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">,</span><span class="n">list_field_values</span> <span class="o">+</span> <span class="n">whereClause</span><span class="o">.</span><span class="n">where_values_list</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pgUpdate&#39;</span><span class="p">)</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Query: &#39;</span> <span class="o">+</span> <span class="n">cons</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">whereClause</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">whereClause</span><span class="o">.</span><span class="n">printProperties</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;New field values: &#39;</span><span class="p">,</span> <span class="n">list_field_values</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of rows updated: &#39;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoCommit</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">=</span><span class="n">cons</span>
    <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.PgOperations.pgValueExists" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pgValueExists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name_with_schema</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_value</span><span class="p">,</span> <span class="n">print_query</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Returns True or False depending whether or not if a value exists in a column.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>table_name_with_schema</code></td>
        <td><code>str</code></td>
        <td><p>Table name included the schema. Ej. "d.linde". </p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>field_name</code></td>
        <td><code>str</code></td>
        <td><p>Column name, e.g. "username". </p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>field_value</code></td>
        <td><code>Any</code></td>
        <td><p>Any value in the column. </p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>print_query</code></td>
        <td><code>bool</code></td>
        <td><p>For debugging purposes. If True will print 
the query and values in the function.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>      <p>Returns: 
    True or False</p>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pgValueExists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name_with_schema</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">field_value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">print_query</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns True or False depending whether or not if a value exists in a column.</span>

<span class="sd">    Args:</span>
<span class="sd">        table_name_with_schema: Table name included the schema. Ej. &quot;d.linde&quot;. </span>
<span class="sd">        field_name: Column name, e.g. &quot;username&quot;. </span>
<span class="sd">        field_value: Any value in the column. </span>
<span class="sd">        print_query: For debugging purposes. If True will print </span>
<span class="sd">            the query and values in the function.</span>

<span class="sd">    Returns: </span>
<span class="sd">        True or False</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">cons</span><span class="o">=</span><span class="s2">&quot;SELECT exists (SELECT </span><span class="si">{0}</span><span class="s2"> FROM </span><span class="si">{1}</span><span class="s2"> WHERE </span><span class="si">{2}</span><span class="s2"> = </span><span class="si">%s</span><span class="s2"> LIMIT 1)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">table_name_with_schema</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cons</span><span class="p">,[</span><span class="n">field_value</span><span class="p">])</span>
    <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgConnection</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_print_queries</span> <span class="ow">or</span> <span class="n">print_query</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pgValueExists&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Query: &quot;</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Field name: &#39;</span><span class="si">{0}</span><span class="s2">&#39;. Field value: </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">field_value</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exists: &quot;</span><span class="p">,</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h2 id="src.pgOperations.pgOperations.SelectGeometryFieldOptions" class="doc doc-heading">
        <code>
SelectGeometryFieldOptions        </code>



</h2>

    <div class="doc doc-contents ">

      <p>This class allows to specify the format to retrieve the geometry field name, e.g.
'geom', 'st_astext(geom)', 'st_asgeojson(geom)', 'st_transform(st_asgeojson(geom),EPSG),
or 'st_transform(st_astext(geom),EPSG).</p>
<p>This is useful to get the field names in a proper string to select rows.</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="n">gf</span><span class="o">=</span><span class="n">pg</span><span class="o">.</span><span class="n">SelectGeometryFormat</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span><span class="n">gfo</span><span class="o">=</span><span class="n">pg</span><span class="o">.</span><span class="n">SelectGeometryFieldOptions</span><span class="p">(</span><span class="n">geom_field_name</span><span class="o">=</span><span class="s1">&#39;geom&#39;</span><span class="p">,</span>
    <span class="n">select_geometry_format</span><span class="o">=</span><span class="n">gf</span><span class="o">.</span><span class="n">geojson</span><span class="p">,</span> <span class="n">epsg_to_reproject</span><span class="o">=</span><span class="s1">&#39;25831&#39;</span><span class="p">)</span><span class="c1">#</span>
<span class="o">&gt;&gt;&gt;</span><span class="n">fieldNames</span><span class="o">=</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgGetTableFieldNames</span><span class="p">(</span><span class="s1">&#39;d.points&#39;</span><span class="p">,</span><span class="n">gfo</span><span class="p">,</span><span class="n">list_fields_to_remove</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">],</span>
    <span class="n">returnAsString</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="n">wc</span><span class="o">=</span><span class="n">pg</span><span class="o">.</span><span class="n">WhereClause</span><span class="p">(</span><span class="n">where_clause</span><span class="o">=</span><span class="s1">&#39;gid=</span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">where_values_list</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span><span class="n">res</span><span class="o">=</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgSelect</span><span class="p">(</span><span class="n">table_name</span><span class="o">=</span><span class="s1">&#39;d.points&#39;</span><span class="p">,</span> <span class="n">string_fields_to_select</span><span class="o">=</span><span class="n">fieldNames</span><span class="p">,</span><span class="n">whereClause</span><span class="o">=</span><span class="n">wc</span><span class="p">)</span>
</code></pre></div>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SelectGeometryFieldOptions</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class allows to specify the format to retrieve the geometry field name, e.g.</span>
<span class="sd">    &#39;geom&#39;, &#39;st_astext(geom)&#39;, &#39;st_asgeojson(geom)&#39;, &#39;st_transform(st_asgeojson(geom),EPSG),</span>
<span class="sd">    or &#39;st_transform(st_astext(geom),EPSG).</span>

<span class="sd">    This is useful to get the field names in a proper string to select rows.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt;gf=pg.SelectGeometryFormat()</span>
<span class="sd">        &gt;&gt;&gt;gfo=pg.SelectGeometryFieldOptions(geom_field_name=&#39;geom&#39;,</span>
<span class="sd">            select_geometry_format=gf.geojson, epsg_to_reproject=&#39;25831&#39;)#</span>
<span class="sd">        &gt;&gt;&gt;fieldNames=pgo.pgGetTableFieldNames(&#39;d.points&#39;,gfo,list_fields_to_remove=[&#39;description&#39;],</span>
<span class="sd">            returnAsString=True)</span>
<span class="sd">        &gt;&gt;&gt;wc=pg.WhereClause(where_clause=&#39;gid=%s&#39;,where_values_list=[3])</span>
<span class="sd">        &gt;&gt;&gt;res=pgo.pgSelect(table_name=&#39;d.points&#39;, string_fields_to_select=fieldNames,whereClause=wc)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">geom_field_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">select_geometry_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">epsg_to_reproject</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">geom_field_name</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s1">&#39;geom&#39;</span><span class="p">,</span>
            <span class="n">epsg_to_reproject</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">select_geometry_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor</span>

<span class="sd">            geom_field_name: The geometry field name.</span>
<span class="sd">            epsg_to_reproject: The EPSG code to reproject the geometry</span>
<span class="sd">            select_geometry_format: The format to retrieve the geometry. </span>
<span class="sd">                The value can be: &#39;text&#39;, &#39;geojson&#39;, or &#39;binary&#39;. Otherwise</span>
<span class="sd">                raises an error.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">select_geometry_format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;binary&#39;</span><span class="p">,</span> <span class="s1">&#39;geojson&#39;</span><span class="p">,</span><span class="s1">&#39;text&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Select geometry format not in [&#39;binary&#39;, &#39;geojson&#39;,&#39;text&#39;]&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">geom_field_name</span><span class="o">=</span><span class="n">geom_field_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epsg_to_reproject</span><span class="o">=</span><span class="n">epsg_to_reproject</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">select_geometry_format</span><span class="o">=</span><span class="n">select_geometry_format</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">












  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.SelectGeometryFieldOptions.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">geom_field_name</span><span class="o">=</span><span class="s1">&#39;geom&#39;</span><span class="p">,</span> <span class="n">epsg_to_reproject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">select_geometry_format</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Constructor</p>
<p>geom_field_name: The geometry field name.
epsg_to_reproject: The EPSG code to reproject the geometry
!!! select_geometry_format "The format to retrieve the geometry. "
    The value can be: 'text', 'geojson', or 'binary'. Otherwise
    raises an error.</p>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">geom_field_name</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s1">&#39;geom&#39;</span><span class="p">,</span>
        <span class="n">epsg_to_reproject</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">select_geometry_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Constructor</span>

<span class="sd">        geom_field_name: The geometry field name.</span>
<span class="sd">        epsg_to_reproject: The EPSG code to reproject the geometry</span>
<span class="sd">        select_geometry_format: The format to retrieve the geometry. </span>
<span class="sd">            The value can be: &#39;text&#39;, &#39;geojson&#39;, or &#39;binary&#39;. Otherwise</span>
<span class="sd">            raises an error.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">select_geometry_format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;binary&#39;</span><span class="p">,</span> <span class="s1">&#39;geojson&#39;</span><span class="p">,</span><span class="s1">&#39;text&#39;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Select geometry format not in [&#39;binary&#39;, &#39;geojson&#39;,&#39;text&#39;]&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">geom_field_name</span><span class="o">=</span><span class="n">geom_field_name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">epsg_to_reproject</span><span class="o">=</span><span class="n">epsg_to_reproject</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">select_geometry_format</span><span class="o">=</span><span class="n">select_geometry_format</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h2 id="src.pgOperations.pgOperations.SelectGeometryFormat" class="doc doc-heading">
        <code>
SelectGeometryFormat        </code>



</h2>

    <div class="doc doc-contents ">

      <p>Contains the allowed formats to get the coordinates of a geometry.
The possible values are 'text', 'geojson', or 'binary'.</p>
<p>This class is useful to create an instance of the class SelectGeometryFieldOptions.</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="n">gf</span><span class="o">=</span><span class="n">pg</span><span class="o">.</span><span class="n">SelectGeometryFormat</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span><span class="n">gfo</span><span class="o">=</span><span class="n">pg</span><span class="o">.</span><span class="n">SelectGeometryFieldOptions</span><span class="p">(</span><span class="n">geom_field_name</span><span class="o">=</span><span class="s1">&#39;geom&#39;</span><span class="p">,</span><span class="n">select_geometry_format</span><span class="o">=</span><span class="n">gf</span><span class="o">.</span><span class="n">geojson</span><span class="p">,</span> <span class="n">epsg_to_reproject</span><span class="o">=</span><span class="s1">&#39;25831&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="n">fieldNames</span><span class="o">=</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgGetTableFieldNames</span><span class="p">(</span><span class="s1">&#39;d.points&#39;</span><span class="p">,</span><span class="n">gfo</span><span class="p">,</span><span class="n">list_fields_to_remove</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">],</span><span class="n">returnAsString</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="n">wc</span><span class="o">=</span><span class="n">pg</span><span class="o">.</span><span class="n">WhereClause</span><span class="p">(</span><span class="n">where_clause</span><span class="o">=</span><span class="s1">&#39;gid=</span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">where_values_list</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span><span class="n">res</span><span class="o">=</span><span class="n">pgo</span><span class="o">.</span><span class="n">pgSelect</span><span class="p">(</span><span class="n">table_name</span><span class="o">=</span><span class="s1">&#39;d.points&#39;</span><span class="p">,</span> <span class="n">string_fields_to_select</span><span class="o">=</span><span class="n">fieldNames</span><span class="p">,</span><span class="n">whereClause</span><span class="o">=</span><span class="n">wc</span><span class="p">)</span>
</code></pre></div>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SelectGeometryFormat</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Contains the allowed formats to get the coordinates of a geometry.</span>
<span class="sd">    The possible values are &#39;text&#39;, &#39;geojson&#39;, or &#39;binary&#39;.</span>

<span class="sd">    This class is useful to create an instance of the class SelectGeometryFieldOptions.</span>
<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt;gf=pg.SelectGeometryFormat()</span>
<span class="sd">        &gt;&gt;&gt;gfo=pg.SelectGeometryFieldOptions(geom_field_name=&#39;geom&#39;,select_geometry_format=gf.geojson, epsg_to_reproject=&#39;25831&#39;)</span>
<span class="sd">        &gt;&gt;&gt;fieldNames=pgo.pgGetTableFieldNames(&#39;d.points&#39;,gfo,list_fields_to_remove=[&#39;description&#39;],returnAsString=True)</span>
<span class="sd">        &gt;&gt;&gt;wc=pg.WhereClause(where_clause=&#39;gid=%s&#39;,where_values_list=[3])</span>
<span class="sd">        &gt;&gt;&gt;res=pgo.pgSelect(table_name=&#39;d.points&#39;, string_fields_to_select=fieldNames,whereClause=wc)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span>
    <span class="n">geojson</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span><span class="s1">&#39;geojson&#39;</span>
    <span class="n">binary</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;binary&#39;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">














  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h2 id="src.pgOperations.pgOperations.WhereClause" class="doc doc-heading">
        <code>
WhereClause        </code>



</h2>

    <div class="doc doc-contents ">

      <p>Class to store the where clause data of the SQL query.
The where clause must not be written with values, e.g. 
<code>'depth &gt; 25.4 and owner_name = "Juan Andrés"'</code> &lt;-- <strong>do not do that</strong>.</p>
<p>Instead, the where clause must be divided in two parts:</p>
<ul>
<li>A string expression with this format: <code>'depth &gt; %s and owner_name = %s'</code>. 
        This expression is stored in the <code>where_clause</code> property.</li>
<li>The values to replace the <code>%s</code> by real values, e.g. <code>[25.4,"Juan Andrés"]</code>.</li>
</ul>
<p>The <code>execute</code> method of the <code>cursor</code> object of the <code>Psycopg2</code> library will 
put the values into the where string expression, in the correct way. You do 
not have to worry about quotes in the values. See the section <i>Passing parameters 
to SQL queries</i> in the <a href='https://www.psycopg.org/docs/usage.html' 
target='_blank'>Psycopg2</a> documentation.</p>

        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">WhereClause</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class to store the where clause data of the SQL query.</span>
<span class="sd">    The where clause must not be written with values, e.g. </span>
<span class="sd">    `&#39;depth &gt; 25.4 and owner_name = &quot;Juan Andrés&quot;&#39;` &lt;-- **do not do that**.</span>

<span class="sd">    Instead, the where clause must be divided in two parts:</span>

<span class="sd">    * A string expression with this format: `&#39;depth &gt; %s and owner_name = %s&#39;`. </span>
<span class="sd">            This expression is stored in the `where_clause` property.</span>
<span class="sd">    * The values to replace the `%s` by real values, e.g. `[25.4,&quot;Juan Andrés&quot;]`.</span>

<span class="sd">    The `execute` method of the `cursor` object of the `Psycopg2` library will </span>
<span class="sd">    put the values into the where string expression, in the correct way. You do </span>
<span class="sd">    not have to worry about quotes in the values. See the section &lt;i&gt;Passing parameters </span>
<span class="sd">    to SQL queries&lt;/i&gt; in the &lt;a href=&#39;https://www.psycopg.org/docs/usage.html&#39; </span>
<span class="sd">    target=&#39;_blank&#39;&gt;Psycopg2&lt;/a&gt; documentation.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">where_clause</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="kc">None</span>
    <span class="n">where_values_list</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">where_clause</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">where_values_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor.</span>

<span class="sd">        Args:</span>
<span class="sd">            where_clause: The where condition expression, to select the rows to </span>
<span class="sd">                update, or delete. Eg: `&#39;description = %s and depth = %s&#39;`.</span>
<span class="sd">                The `where` word must not be in the expression. The values for the where</span>
<span class="sd">                condition must not be specified in the string. Instead %s must be used.</span>
<span class="sd">                The values of the where condition must be specified in the property </span>
<span class="sd">                `where_values_list`. **Do not quote the %s in the where string**.</span>
<span class="sd">            where_values_list: List of the values of the %s in the </span>
<span class="sd">                property `where_clause`, in the order of the %s. e.g. if the </span>
<span class="sd">                where condition is e.g. `&#39;where description = %s and depth = %s&#39;`</span>
<span class="sd">                the list of values must have two values, first one the value</span>
<span class="sd">                for the field `condition` and the second one the value for</span>
<span class="sd">                the field `depth`, e.g. `[&quot;This is the description&quot;, 25.3]`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">where_clause</span> <span class="o">=</span> <span class="n">where_clause</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">where_values_list</span><span class="o">=</span><span class="n">where_values_list</span>
    <span class="k">def</span> <span class="nf">printProperties</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;where_clause: &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">where_clause</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;where_values_list&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">where_values_list</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">











  <div class="doc doc-object doc-method">



<h3 id="src.pgOperations.pgOperations.WhereClause.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">where_clause</span><span class="p">,</span> <span class="n">where_values_list</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Constructor.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>where_clause</code></td>
        <td><code>str</code></td>
        <td><p>The where condition expression, to select the rows to 
update, or delete. Eg: <code>'description = %s and depth = %s'</code>.
The <code>where</code> word must not be in the expression. The values for the where
condition must not be specified in the string. Instead %s must be used.
The values of the where condition must be specified in the property 
<code>where_values_list</code>. <strong>Do not quote the %s in the where string</strong>.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>where_values_list</code></td>
        <td><code>list</code></td>
        <td><p>List of the values of the %s in the 
property <code>where_clause</code>, in the order of the %s. e.g. if the 
where condition is e.g. <code>'where description = %s and depth = %s'</code>
the list of values must have two values, first one the value
for the field <code>condition</code> and the second one the value for
the field <code>depth</code>, e.g. <code>["This is the description", 25.3]</code>.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>pgOperations/pgOperations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">where_clause</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">where_values_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Constructor.</span>

<span class="sd">    Args:</span>
<span class="sd">        where_clause: The where condition expression, to select the rows to </span>
<span class="sd">            update, or delete. Eg: `&#39;description = %s and depth = %s&#39;`.</span>
<span class="sd">            The `where` word must not be in the expression. The values for the where</span>
<span class="sd">            condition must not be specified in the string. Instead %s must be used.</span>
<span class="sd">            The values of the where condition must be specified in the property </span>
<span class="sd">            `where_values_list`. **Do not quote the %s in the where string**.</span>
<span class="sd">        where_values_list: List of the values of the %s in the </span>
<span class="sd">            property `where_clause`, in the order of the %s. e.g. if the </span>
<span class="sd">            where condition is e.g. `&#39;where description = %s and depth = %s&#39;`</span>
<span class="sd">            the list of values must have two values, first one the value</span>
<span class="sd">            for the field `condition` and the second one the value for</span>
<span class="sd">            the field `depth`, e.g. `[&quot;This is the description&quot;, 25.3]`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">where_clause</span> <span class="o">=</span> <span class="n">where_clause</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">where_values_list</span><span class="o">=</span><span class="n">where_values_list</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>







  </div>

    </div>

  </div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../tutorials/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Tutorials" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Tutorials
            </div>
          </div>
        </a>
      
      
        
        <a href="../explanation/" class="md-footer__link md-footer__link--next" aria-label="Next: Explanation" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Explanation
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>